{******************************************************************************}
{ Projeto: Componentes ACBr                                                    }
{ Biblioteca multi plataforma de componentes Delphi para interação com equipa- }
{ mentos de Automação Comercial utilizados no Brasil                           }
{                                                                              }
{  Você pode obter a última versão desse arquivo na página do Projeto ACBr     }
{ Componentes localizado em      http://www.sourceforge.net/projects/acbr      }
{                                                                              }
{  Esta biblioteca é software livre; você pode redistribuí-la e/ou modificá-la }
{ sob os termos da Licença Pública Geral Menor do GNU conforme publicada pela  }
{ Free Software Foundation; tanto a versão 2.1 da Licença, ou (a seu critério) }
{ qualquer versão posterior.                                                   }
{                                                                              }
{  Esta biblioteca é distribuída na expectativa de que seja útil, porém, SEM   }
{ NENHUMA GARANTIA; nem mesmo a garantia implícita de COMERCIABILIDADE OU      }
{ ADEQUAÇÃO A UMA FINALIDADE ESPECÍFICA. Consulte a Licença Pública Geral Menor}
{ do GNU para mais detalhes. (Arquivo LICENÇA.TXT ou LICENSE.TXT)              }
{                                                                              }
{  Você deve ter recebido uma cópia da Licença Pública Geral Menor do GNU junto}
{ com esta biblioteca; se não, escreva para a Free Software Foundation, Inc.,  }
{ no endereço 59 Temple Street, Suite 330, Boston, MA 02111-1307 USA.          }
{ Você também pode obter uma copia da licença em:                              }
{ http://www.opensource.org/licenses/lgpl-license.php                          }
{                                                                              }
{ Daniel Simões de Almeida  -  daniel@djsystem.com.br  -  www.djsystem.com.br  }
{              Praça Anita Costa, 34 - Tatuí - SP - 18270-410                  }
{                                                                              }
{******************************************************************************}
Agradecimentos:

* Administradores:
- Daniel Simões de Almeida
- André Ferreira de Moraes

* Desenvolvedores:
- Wemerson P. Souto - Doação do componente ao projeto ACBr

{******************************************************************************
|* ACBrNFePCN
|*
|* PROPÓSITO: Registro de Alterações
******************************************************************************}

Símbolo : Significado

[+]     : Novo recurso
[*]     : Recurso modificado/melhorado
[-]     : Correção de Bug (assim esperamos)



09/01/2016
-- ACBrNFeDANFeRLRetrato ACBrNFeDANFeRLPaisagem -- 
[*] Refataraçao na apresentação de Fatura(s) e Duplicata(s).
    Por causa da possibilidade de existir as Tag Fat e Dup num xml.
    http://www.projetoacbr.com.br/forum/topic/27249-impressao-danfe-vencimento-a-vista-com-erro/
    http://www.projetoacbr.com.br/forum/topic/26554-campo-duplicatas-errado-danfe/
    por: Henrique Leonardo


08/01/2016
-- ACBrNFeDANFeRLPaisagem -- 
[*] Remoçao do ManterCodigo, não existe necessidade
    por: Henrique Leonardo

08/01/2016
-- Danfes Fortes -- 
[*] Refatoriação para utilizar os metodos da classe pai do DANFE

07/01/2016
-- frlDANFeRL ACBrNFeDANFeRLPaisagem ACBrNFeDANFeRLRetrato ACBrNFeDANFeRLSimplificado -- 
[*] Tratamento para imprimir codigo ou Ean conforme configuração 
    da Propriedade ExibeEan
    por: Henrique Leonardo

06/01/2016
-- pcnNFeW -- 
[-] Acerto para gerar a tag de totalização do FCP mesmo quando zerada, não
    estava passando em alguns webservices.
    http://www.projetoacbr.com.br/forum/topic/27137-tag-sumindo/#comment-177203
    por: regys.silveira

06/01/2016
-- ACBRNFeNotasFiscais --
[-] Conforme nota técnica 2015.003 v1.20 foi removida a validação 739 para NFc-e
    com grupo de combustíveis.
    por: regys.silveira.

05/01/2016
-- ACBrNFeWebServices --
[*] Adicionada verificação de Chave na atribuição de TNFeConsulta.NFeChave
    (por: DSA)

04/01/2016
-- ACBrDANFCeFortesFrA4 --
[*] Tratamentos para apresentação dos tributos ( Federal / Estadual e Municipal ).
    conforme o manual de olho no imposto
    http://www.afrac.org.br/wp-content/uploads/2014/11/MANUAL-DE-OLHO-NO-IMPOSTO-0-0-8-2.pdf
    por: Henrique Leonardo 

-- ACBRNFeNotasFiscais --
[-] Correção para atribuição de "ACBrNFe.NotasFiscais[x].NomeArq" em
    "TNotasFiscais.LoadFromFile". A rotina anterior atribuia o ultimo NomeArq
    a todas as Notas carregadas na memória  (por: DSA)
    http://www.projetoacbr.com.br/forum/topic/27074-xml-sendo-sobrescrito/

-- ACBrNFeWebServices --
[*] Ajustes em "Create" e "Clear" de todos os WebServices, para garantir que
    após o "Clear" os valores necessários, para as propriedades internas, do
    WebService esteja corretos.  (por: DSA)
    http://www.projetoacbr.com.br/forum/index.php?showtopic=27079

03/01/2016
-- ACBrNFeWebServices --
[+] Adicionada sobrecarga no método "Clear" de todos os WebServices
[*] Remoção de propriedades sem uso.
[*] Ajuste de acesso (write) em propriedades que podem ser ReadOnly
    (por: DSA)

23/12/2015
-- pcnNFeW --
[*] Alterado a condição para determinar se vai ser gerado o grupo <ICMSUFDest> ou
    não. (por: Italo Jurisato Junior)

-- ACBrNFeNotasFiscais --
[*] Ajuste no método "VerificarAssinatura", para informar o infElement (por: DSA)

22/12/2015
-- ACBrNFeWebServices / ACBrNFe / pcnRetConsSitNFe --
[*] Incluido o status 303 para que seja acrescentado o protocolo de denegação ao XML.
    por: Italo Jurisato Junior

21/12/2015
--  ACBrNFeDANFeRL  --
[-] Falta de Variavel 

      	por : Henrique Leonardo 

21/12/2015
--  ACBrNFeDANFeRLClass / ACBrNFeDANFeRL / ACBrNFeDANFeRLPaisagem / ACBrNFeDANFeRLRetrato --
[+] Tratamento da nova Propriedade ImprimeNomeFantasia. Quando Selecionado Verdadeiro e a
      Tag XFantasia Preenchida : Imprime o Nome Fantasia.
      	por : Henrique Leonardo 

21/12/2015
--  ACBrNFeDANFEFRDM --
[+] Tratamento da nova Propriedade ImprimeNomeFantasia. Quando Selecionado Verdadeiro e a
      Tag XFantasia Preenchida : Imprime o Nome Fantasia.
      	por : Henrique Leonardo 


21/12/2015
--  ACBrNFeDANFEClass --
[+] Nova Propriedade ImprimeNomeFantasia. Quando Selecionado Verdadeiro e a
      Tag XFantasia Preenchida : Imprime o Nome Fantasia.
[+] Nova Função ManterNomeImpresso.
		
      	por : Henrique Leonardo 

18/12/2015
--  ACBrNFeDANFEFRDM --
[*] Novas Tabulações
[*] Ajuste no valor liquido 
     De  : FieldByName('Valorliquido').AsString := FormatFloatBr( Prod.vProd - ManterVDesc( Prod.vDesc , Prod.VUnCom , Prod.QCom),'###,###,##0.00');
     Para: FieldByName('Valorliquido').AsString := FormatFloatBr( Prod.vProd - Prod.vDesc ,'###,###,##0.00');
 
[*] Melhoria da funcao ManterDesc 
     De :   if ( FDANFEClassOwner.ImprimirDescPorc ) and ( dvDesc > 0 ) then
	  	Result := (( dvDesc*100 ) / (dVUnCom * dQCom) )
	    else
	  	Result := dvDesc;

     Para : if ( FDANFEClassOwner.ImprimirDescPorc ) then
	    begin
             if ( ( dvDesc  > 0 ) and ( dVUnCom > 0 ) and ( dQCom   > 0 ) ) then
             	Result := (( dvDesc*100 ) / (dVUnCom * dQCom) )
	     else
	        Result := 0;
	    end
	    else
	     Result := dvDesc;
		
      	por : Henrique Leonardo 

18/12/2015
--  ACBrNFeDANFeRLPaisagem / ACBrNFeDANFeRLRetrato --
[*] Melhoria da funcao ManterDesc 
        De :     if (dvDesc > 0)  then
        Para :   if (dvDesc > 0) and ( dvProd > 0 ) then
		
      	por : Henrique Leonardo 

  
18/12/2015
--  ACBrNFeDANFeRLPaisagem / ACBrNFeDANFeRLRetrato --
[-] Correção da funcao ManterDesc para trazer zero de percentual e nao o valor de desconto 
   
      	por : Henrique Leonardo 
          
   
18/12/2015
--  ACBrNFeDANFeRLPaisagem / ACBrNFeDANFeRLRetrato --
[-] Correção quando FImprimirDescPorc = True
	Nao imprimir o Total Liquido
      	por : Henrique Leonardo 

16/12/2015
-- ACBrNFeWebServices / ACBrNFeNotasFiscais --
[*] Incluido o status 302 para que seja acrescentado o protocolo de denegação
    ao XML.
    por: Italo Jurisato Junior

-- ACBrNFeServicos --
[-] URL-QRCode da UF: PA ambiente de produção estava igual a de homologação.
    por: Cleiver / Italo Jurisato Junior

16/12/2015
-- pcnNFe --
[-] Remoção de valores default para a tag "nro", o componente atribuia o valor
    "SEM NUMERO", causando problemas quando o endereço não possuía valor na tag,
    quando vai imprimir aparecia a string mesmo não existindo no XML.
    por: regys.silveira

11/12/2015
[*] Acerto na importação do layout txt para a norma técnica 2015/003

10/12/2015
--  ACBrNFeDANFeRLPaisagem / ACBrNFeDANFeRLRetrato --
[-] Correção da Formataçao do Cep. 
     	por : Henrique Leonardo 

09/12/2015
-- ACBrNFeDANFEFRDM --
[*] Novo campo em cdsParametros :  FieldDefs.Add('ImprimeDescAcrescItem', ftInteger);
     	por : Henrique Leonardo   

06/12/2015
-- ACBrNFeDANFeRLPaisagem / ACBrNFeDANFeRLRetrato / ACBrNFeDANFeRL ACBrNFeDANFeRLClass --
[+] Implantaçao da Coluna Valor Liquido e refatoração para impressão
[+] Novo campo em cdsItens :  FieldDefs.Add('Valorliquido',ftString,18);
[*] Novo padrão para Impressao de Medicamentos
[*] Melhoria no Quebralinhas;
	por : Henrique Leonardo    

06/12/2015
-- ACBrNFeDANFEFRDM --
[*] Novo padrão para Impressao de Medicamentos
[*] Melhoria no Quebralinhas;
	por : Henrique Leonardo    


03/12/2015
-- ACBrNFeNotasFiscais --
[*] método "Assinar", modificado para só validar CNPJ se conseguir ler o mesmo
    com sucesso, do Certificado

-- ACBrNFeWebServices --
[*] WebService: "TNFeEnvEvento", modificado, para salvar o "NomeArquivo", se o
    XML for salvo após a consulta (depende da configuração)

-- pcnEventoNFe --
[+] Tipo: TRetInfEvento, adicionada a propriedade: "NomeArquivo: String", que
    conterá o nome do arquivo XML criado, após o retorno, e se estiver
    configurado para salvar o XML

02/12/2015
-- pcnRetDownloadNFe --
[*] Removido na montagem do XML a linha '<' + ENCODING_UTF8 + '>' para 
    o componente forçar a conversão ao salvar o XML.
    por: Italo Jurisato Junior

-- ACBrNFeWebServices --
[*] Removido na montagem de alguns XML a linha '<' + ENCODING_UTF8 + '>' para 
    o componente forçar a conversão ao salvar o XML.
    por: Italo Jurisato Junior

-- ACBrNFeNotasFiscais --
[*] Alterado o valor da propriedade verProc para 'ACBrNFe' para não confundir,
    pois 'ACBrNFe2' alguem pode achar que se trata da versão 2.00 do XML.
    por: Italo Jurisato Junior

-- ACBrNFeWebServices --
[*] Ao protocolar o XML após um envio ou consulta estava provocando uma nova
    leitura do XML, agora o XML assinado e protocolado é armazenado da propriedade
    XMLOriginal em vez de XML.
    por: Italo Jurisato Junior

28/11/2015
-- ACBrNFeDANFEFRDM --
[+] Tratamento para IDEstrangeiro
[*] Refatoracao para Utilizar a Função FormatarCNPJouCPF
    por: Henrique Leonardo

-- ACBrNFeDANFeRLRetrato / ACBrNFeDANFeRLPaisagem --
[+] Tratamento para IDEstrangeiro
[*] Refatoracao para Utilizar a Função FormatarCNPJouCPF
[*] Refatoracao de EnderecoEntrega e EnderecoRetirada : 
     para apresentar CNPJ ou CPF;
[*] Funçao TrataDocumento( sCNPJCPF : String ) : String;
[*] Remoção de IF,  variaveis. Algumas novas tabulações;
    por: Henrique Leonardo

27/11/2015
-- ACBrNFeWebServices --
[*] Acrescenta o protocolo de autorização quando é autorizado fora do prazo
    Status = 150.
    por: Italo Jurisato Junior

-- pcnEventoNFe --
[*] Adicionado o tipo de evento: teConfInternalizacao - (990910) 
    Confirmacao de Internalizacao da Mercadoria na SUFRAMA
    por: Italo Jurisato Junior

25/11/2015
[+] Nova Banda ( rlbCancelada ), para apresentar Nfe. Cancelada em
    ACBrNFeDANFeRLRetrato  e ACBrNFeDANFeRLPaisagem.
    Quando a propriedade NfeCancelada estiver habilitada, sera
    apresentada a banda rlbCancelada.
[*] Remoção de algumas linhas comentadas;
    Por: Henrique Leonardo

[*] Acerto na geração de PDF, antes ao enviar por email as letras ficavam estranhas, 
    também foi removida opção que deixa o arquivo maior.
    por: regys.silveira

24/11/2015
-- pcnNFeW --
[*] Fixado em 2 casas decimais a geração da TAG pICMSInter conforme o novo Schema
    pacote PL_008h1
    por: Italo Jurisato Junior

18/11/2015
-- pcnNFe / pcnNFeW / pcnNFeR --
[*] Trocado o tipo dos campos vEncIni e vEncFim de String para Currency para que
    possa ser informado um valor decimal com até 3 casas decimais conforme Nota
    Técnica 2015/002 versão 1.10
    por: Italo Jurisato Junior

13/11/2015
-- ACBrNFeWebServices --
[-] Acerto na montagem do Path ao salvar o arquivo *-NFeDFe.xml
    por: Italo Jurisato Junior

12/11/2015
-- pcnNFeW --
[-] Acerto para não obrigar o CPF/CNPJ quando for NFC-e
    por: regys.silveira

11/11/2015
-- ACBrDANFCeFortes --
[-] Refatoração para usar os métodos de formatação de valor unitário, valor total 
    e outros também para o DANFCe Fortes.
    por: regys.silveira

10/11/2015
-- ACBrNFeDANFEFRDM --
[-] Correção do desconto no item valor acima de 999,99
    por : Henrique Leonardo     
		
07/11/2015
-- ACBrNFeDANFEFRDM --
[-] Correção dos FieldDefs , aplicada na revisao 10404 
        FieldDefs.Add('vFrete'    , ftString, 18);
        FieldDefs.Add('vOutro'    , ftString, 18);
        FieldDefs.Add('vSeg'      , ftString, 18);
        FieldDefs.Add('vDesc'     , ftString, 18);

[*] Novos campos em cdsDadosProdutos
        FieldDefs.Add('Valorliquido'    , ftString, 18);
        FieldDefs.Add('ValorAcrescimos' , ftString, 18);

[*] Novo campo em cdsCalculoImposto
       FieldDefs.Add('ValorApagar' , ftFloat);

[*] Refatoração para aplicar os novos campos.
    Os novos campos serão aplicados no arquivo de DAnfe DANFeNFCe_dc.fr3
    O arquivo DANFeNFCe.fr3 ficara obsoleto com esta atualização.

	por : Henrique Leonardo
	
09/11/2015
-- ACBrNFeDANFeRLRetrato --
[-] Ajuste na geração de Duplicatas ( outras ).

[*] Implantação da Geração ePec.

    por: Henrique Leonardo

-- ACBrNFeDANFeRLPaisagem --
[*] Implantação da Geração ePec.

    por: Henrique Leonardo


09/11/2015
-- pcnNFeW --
[-] Ajuste na geração do Grupo "pag".
    por: João Elson

05/11/2015
-- pcnNFeW --
[-] Correção na geração do Grupo "pag"    (por: Leonardo de Biasi)
    http://www.projetoacbr.com.br/forum/index.php?showtopic=25714

03/11/2015
-- ACBrNFeWebSerices --
[*] Possivel correção para definição de URL no WebService de AM em:
    TNFeRecepcao, TNFeRetRecepcao, TNFeRecibo    (por: DSA)

03/11/2015
-- ACBrNFeWebSerices --
[*] Possível correção ao realizar o envio de uma NF-e para o SVC.
    por: Italo Jurisato Junior

02/11/2015
--- ACBrNFeDANFeRLRetrato --
[*] Ajustes para impressão de duplicatas no caso da forma de pagamento igual a outros;
	por : Henrique Leonardo

--- ACBrNFeDANFeRLPaisagem --
[*] Ajustes para impressão de duplicatas no caso da forma de pagamento igual a outros;
	por : Henrique Leonardo

-- ACBrNFeWebServices --
[*] Refatoração, simplificação de código em TNFeInutilizacao.TratarResposta e
    TNFeEnvEvento.TratarResposta

30/10/2015
-- ACBrNFeWebServices --
[-] Correção não estava salvando o retorno ao enviar um evento.
    por: Italo Jurisato Junior

28/10/2015 
-- ACBrDANFCeFortesFrA4 --
[+] Adição do modelo em Fortes
	por : Marciano Bandeira
	
28/10/2015
-- ACBrNFeDANFEFRDM --
[*] Correção na impressão do DANFE em FastReport para notas à vista.
		por: Gilson Inácio do Carmo
27/10/2015
-- ACBrNFeWebSerices --
[*] Possível correção ao realizar uma consulta de uma NF-e enviada para o SVC.
    por: Italo Jurisato Junior
-- pcnNFeW --
[-] Alterado a posição do grupo ICMSUFDest no XML, agora será gerado após o COFINSST
    conforme consta no Schema.
    por: Italo Jurisato Junior
-- ACBrNFeServicos --
[-] Incluido as URLs de homologação NFC-e UF-CE.
    por: Evenildo / Italo Jurisato Junior

26/10/2015
-- pcnNFeW --
[*] Possivel correção na geração do XML quando o CST é 51 para a UF - SP devemos
    gerar a TAG vICMS mesmo com o valor zero.
    por: Italo Jurisato Junior
-- ACBrNFeServicos --
[-] Acrescentado o https:// no inicio da URL do QR-Code homologação e produção.
    por: Daniel Carus / Italo Jurisato Junior
-- pcnNFeW --
[-] Possivel correção na geração do XML quando é informado o grupo ICMSUFDest.
    por: Italo Jurisato Junior

23/10/2015
-- ACBrNFeDANFeRL --
[-] Ajuste para não exibir a janela de Progresso na geração do PDF, quando
    MostrarStatus = False
    http://www.projetoacbr.com.br/forum/topic/25163-impressao-nfe/
[-] Ajuste para utilizar o Diretório da aplicação se no do PDF não contiver Path
    (por: DSA)

--ACBrDANFEFR --
[-] Acerto para não imprimir o totalizar de impostos aproximados quando ele for 
    igual a zero.
    por: regys.silveira

-- ACBrDANFCeFortesFr --
[-] Ajuste para calcular corretamente o tamanho da página no DANFCe em Fortes
    (não estava considerando a área de cabeçalho dos itens)
    por: André Moraes

-- ACBrDANFCeFortesFr -- ACBrNFeDANFeESCPOS --
[*] Alterado para imprimir apenas uma vez o campo "Valor Líquido" quando tiver
    desconto e acréscimo no mesmo item
    por: André Moraes

-- ACBrNFeWebServices --	
[-] Corrigido para atualizar XML mesmo quando não estiver configurado para salvar 
    o XML em disco.
    por: André Moraes

-- ACBrNFeNotasFiscais --
[-] Corrigido para enviar corretamente o destinatário ao calcular o QRCode que será
    adicionado ao XML.
[*] Alterado para atribuir valores defaults ao País no endereço do destinatário
    por: André Moraes

-- pcnNFeW --
[-] Alterado para o CNPJ e CPF ser gerado com prioridade ao campo IdEstrangeiro
   por: André Moraes

22/10/2015
-- ACBrDANFCeFR --
[-] Corrigida a impressão do troco no DANFC-e para FastReport.
    por: regys.silveira.
	
-- ACBrNFeConfiguracoes --
[*] Retornado propriedade AtualizarXMLCancelado.
[*] Criado métodos SetCSC e SetIdCSC para atribuir os valores corretamente 
    FCSC(Sem espaços no final) e FIdCSC(Com 6 dígitos numéricos).
    por: André Moraes
	
-- ACBrNFeNotasFiscais --
[*] Alterado método GerarXML para recalcular o valor da variável FNomeArq 
    respeitando o Path do arquivo carregado e apenas quando o ID carregado
    for diferente do ID calculado pelo componente.
    por: André Moraes
	
-- ACBrNFeServicos.ini --	
[*] Alterado o valor das chaves URL-QRCode e URL-ConsultaNFCe para usar HTTPS
    conforme validação do esquema.
    por: André Moraes
	
-- ACBrNFeWebServices --	
[*] Alterado método TNFeConsulta.TratarResposta para atualizar o XML consultado
    baseado no valor da propriedade FPConfiguracoesNFe.Geral.AtualizarXMLCancelado
    por: André Moraes
	
-- ACBrNFeDANFeESCPOS -- ACBrDANFCeFortesFr --
[-] Corrigido impressão do valor líquido do produto para considerar desconto e acréscimos	
    por: André Moraes
	
21/10/2015
-- pcnNFe / pcnNFeW / pcnNFeR --
[+] Adicionado as novas TAGs conforme NT 2015/003 v 1.10.
    Por: Italo Jurisato Junior
[-] Acerto no campos de base e valor do ISSQN, quando se utilizava valores
    muito altos acontecia um erro de conversão de tipo.
    por: regys.silveira.

-- ACBrNFe --
[*] Método "Consultar" modificado para permitir informar a Chave por parâmetro.
    Se parâmetro "AChave" for informado, ele será utilizado ao invez da
    informação das Notas carregadas.
[*] Método "EnviarEvento" modificado, para:
    - considerar o Ambiente definido em: Configuracoes.WebServices.Ambiente;
    - Verificar equivalencia de chaves entre NFes carregadas e Eventos
    - Corrigida possibilidade de A.V. em Loop
(por: DSA)

-- ACBrNFeNotasFiscais --
[*] Limpeza de variavel interna (FXML) não necessária
[*] Atribuir conteudo a "XML", faz o componente transferir os dados lido para as
    propriedades internas e "XMLAssinado"
[*] Atribuir conteudo a "XMLOriginal", reflete em "XMLAssinado", (se existir a
    tag de assinatura)
[*] Refatoração do Nome de váriaveis para melhor compreensão do Fonte, e para
    evitar colisão de variaves e propriedades com o mesmo nome.
[*] Método "Assinar" agora sempre verifica se o CNPJ do XML e do Certificado
    possuem a mesma raiz.
[*] Método "LoadFromFile" modificado para usar TMemoryStream para evitar problemas
    com quebra de linhas diferente do utilizado pelo S.O.
[*] Método "LoadFromString" não mais ajusta valores de:
    Configuracoes.Geral.ModeloDF e Configuracoes.Geral.VersaoDF pois isso poderia
    causar efeitos colaterais
(por: DSA)

-- ACBrNFeWebServices --
[+] Adicionado o método Protected ExtrairUFChaveAcesso
[*] "TNFeRecepcao" modificado para considerar as informações de "Modelo, Versao,
    UF, e Ambiente" da NFe carregada em memória.
[*] "TNFeRetRecepcao" modificado para considerar as informações de "Modelo, Versao,
    UF, e Ambiente" da NFe carregada em memória.
[*] "TNFeRecibo" modificado para considerar as informações de "Modelo, Versao,
    UF, e Ambiente" da NFe carregada em memória.
[*] "TNFeConsulta" modificado para considerar as informações de "Versao, Ambiente"
    da NFe carregada em memória e "Modelo, UF" da Chave da NFe
[*] "TNFeConsultaCadastro" modificado para considerar "Configuracoes.WebServices.UF"
    se a UF não for previamente informada
[*] "TNFeEnvEvento" modificado para considerar: "Versao, Ambiente, UF" do Evento
    carregado na memória
(por: DSA)

16/10/2015
[-] contribuição: http://www.projetoacbr.com.br/forum/topic/25243-danfe-fastreport-fatura-correção/
    Correção na impressão de informações da fatura.

15/10/2015
[-] Correção para mostrar a descrição de via consumidor/estabelecimento
    corretamente para DANFC-e em Forte e Fast.
    por: regys.silveira
[-] Acerto na regra de validação 777, ela deve ser considerada somente quando 
    o NCM for diferente de 00, porque 00 é serviço.
    por: regys.silveira
[-] Acerto na regra de validação 564, estava considerando todos os produtos 
    para o calculo, mas devemos excluir os itens que são NCM 00 porque são 
    serviços
    por: regys.silveira

-- ACBrNFeDANFeRLClass --     (por: DSA)
[*] SavePDF: Modificada para permitir informar "MostrarStatus".
[*] SavePDF: Modificada para verificar se o arquivo foi informado e adicionada
    verificação do Diretório

14/10/2015
-- ACBrNFeDANFeRLClass --
[+] Adicionada a propriedade "ExibeCampoFatura: Boolean", (default False) se
    ativa, exibe as informações de <fat>    (por: Henrique Leonardo)

-- ACBrNFeDANFeRLRetrato e ACBrNFeDANFeRLPaisagem --
[+] Adicionada a Banda "FaturaReal", para imprimir as informações específicas
    da Tag <fat>. Somente é impressa quando ExibeCampoFatura := True
[+] Adicionado o suporte de Impressão de Logo por Stream
    http://www.projetoacbr.com.br/forum/topic/25128-implatanção-da-fatura-em-danfe-fortesreport
    (por: Henrique Leonardo)

07/10/2015
-- pcnNFeW.pas --
[-] Acerto para trocar a descriçao do primeiro item da nota somente quando for NFC-e
    por regys.silveira

02/10/2015
-- ACBrNFePCN --
[-] Correção em pcnNFeW.pas para não incluir a Tag vICMS, caso não informada se CST=51
    http://www.projetoacbr.com.br/forum/topic/17819-nfe-310-icms-cst-51-diferimento/?page=2#comment-160737

30/09/2015
-- ACBrNFeWebServices.pas --
[-] Acerto na consulta de NF-e, não estava setando o ambiente antes de consultar
    isso fazia com que o ambiente ficasse sempre em produção.
    por: regys.silveira

29/09/2015
-- pcnEnvEventoNFe --
[-] Correção ao enviar um Evento de EPEC de uma NFC-e o grupo <dest> deverá ser
    omitido caso não tenha sido informado os dados do destinatário na nota.
    por: Italo Jurisato Junior
-- ACBrNFeWebServices --
[-] TNFeConsulta, Correção de Bug introduzido em 28/09. Interpretação errada de
    tpEmis e tpAmb (por: DSA)
[-] http://www.projetoacbr.com.br/forum/topic/24731-chave-incorreta-ao-carregar-nfe-avulsa/

28/09/2015
-- ACBrNFeWebServices --
[-] TNFeConsulta, correção para consulta de NFEs com UF diferente da UF do
    Emissor.  (por: DSA)
[-] Acerto para utilizar o CNPJ do evento quando for salvá-lo em disco,
    em alguns casos o usuário pode utilizar o certificado da Matriz, antes
    estava salvando utilizando o CNPJ do certificado o que mistura xmls de
    evento da matriz com a filial.
    por: (regys.silveira)

-- ACBrNFeNotasFiscais --    (por: DSA)
[*] Corrigido o método Validar, para extrair apenas a Tag <NFe> do XML informado

-- ACBrNFeServicos.ini --
[-] Correção de endereços
    http://www.projetoacbr.com.br/forum/topic/24565-erro-2261-falha-ao-acessar-banco-de-dados/#comment-159784
    por: regys.silveira

26/09/2015
-- ACBrNFeDANFeRLR --
[+] Adicionado suporte as propriedades: CasasDecimais.Tag, CasasDecimais._Mask_qCom e
    CasasDecimais._Mask_vUnCom   (por: Henrique Leonardo)
    http://www.projetoacbr.com.br/forum/index.php?showtopic=24654

25/09/2015
[+] Adicionada propriedade ManterVeiculos ao DANFE para quebrar ou não a linha 
    nas informações do veiculo
    http://www.projetoacbr.com.br/forum/index.php?showtopic=24609
    por (Henrique Leonardo)

[-] Acerto para verificar corretamente o CNPJ ao assinar o XML da NF-e
    Em diversos casos a filial pode utilizar o certificado da matriz, então
    devemos checar somente a raiz do CNPJ (8 primeiros digitos)
    por: regys.silveira

24/09/2015
-- pcnConversaoNFe --     (por: DSA)
[+] Adicionado o método:
    function ModeloDFToPrefixo(const t: TpcnModeloDF): String;
    (Retorna "NFe" ou "NFCe")

-- ACBrNFeWebServices --
[-] TNFeConsulta, corrigido, para usar as informações de UF e Modelo da chave
    informada.
[*] TNFeConsulta, ajuste parta não atualizar o XML se não recebeu "protNFe"
[*] TNFeConsulta, modificado para priorizar a gravação da Resposta, no arquivo
    XML previamente informado.
[*] TNFeConsulta, consulta por XML, modificado para respeitar o valor de
    "Arquivos.Salvar" e "Geral.Salvar"
[*] TNFeConsulta, remoção de código comentado
[*] TNFeConsulta, consulta pela Chave (sem NFe carregada) ajustada para respeitar
    os valores de "Arquivos.Salvar"  e "Arquivos.SalvarApenasNFeProcessadas" e
    "Geral.Salvar"

[*] TNFeRecepcao, modificado para priorizar a gravação da Resposta, no arquivo
    XML previamente informado.
[*] TNFeRecepcao, modificado para respeitar o valor de "Arquivos.Salvar"

[*] TNFeRetRecepcao, modificado para priorizar a gravação da Resposta, no arquivo
    XML previamente informado.
[*] TNFeRetRecepcao, modificado para respeitar o valor de "Arquivos.Salvar"

-- ACBrNFeNotasFiscais --
[*] Aprimorada a atribuição da propriedade "XML", para que a mesma considere
    o conteudo e replique o valor para XMLOriginal e XMLAssinado
[*] Método NotaFiscal.Validar, modificado para verificar se o XML enviado possui
    a Tag de assinatura, e no caso de não possuir, assinar o XML apenas se o
    CNPJ do XML for o mesmo do CNPJ do Certificado
[*] Método NotaFiscal.Assinar, modificado para respeitar o valor da propriedade
    "Arquivos.Salvar" e dar prioridade de Gravação no Nome de arquivo
    previamente informado.

23/09/2015
-- ACBrNFeNotasFiscais --     (por: DSA)
[*] NotaFiscal.CalcularNomeArquivo, modificado, para considerar NFe.procNFe.cStat
    e nomear o arquivo com o sufixo '-nfe.xml' ou '-den.xml'

-- ACBrNFeWebServices --
[-] Ajuste em TNFeRecepcao.TratarResposta para que ProcNFe conste no XML e nos
    arquivos salvos
[-] Ajuste em TNFeRetRecepcao.TratarRespostaFinal para que ProcNFe conste no XML e nos
    arquivos salvos. Remoção de código comentado.

22/09/2015
-- ACBrDANFCeFortesFr --
[*] Impressão dos descontos do Item, modificada para ficar condicionada a
    propriedade "ImprimirDescPorc", e não "ImprimirTotalLiquido"   (por: DSA)

18/09/2015
-- pcnRetDownloadNFe --
[*] Removido o Encoding UTF8 que estava sendo acrescentado ao retorno, pois o mesmo
    ao ser salvo a rotina acrescenta ou não se necessário.
    Por: Rômulo da Costa de Souza / Italo Jurisato Junior

-- pcnNFeW --
[*] Ajustado para gerar grupo "exportInd" também quando existir NF-e Referênciada
   (por: Everton)  http://www.projetoacbr.com.br/forum/index.php?showtopic=23811

17/09/2015
-- ACBrNFeNotasFiscais, ACBrNFeWebServices --
[*] Ajustes para que os arquivos de envio/retorno fiquem condicionados a propriedade
    Configuracoes.Geral.Salvar e os arquivos fiscais a propriedade
    Configuracoes.Arquivos.Salvar
    Por: Italo Jurisato Junior

-- ACBrNFeNotasFiscais --
[*] Correção em ValidarRegrasdeNegocios para que não efetue validações 505 e 506
    caso NFe.Ide.dSaiEnt não seja especificada  (por: Alberto Leal)
    http://www.projetoacbr.com.br/forum/index.php?showtopic=24429

16/09/2015
-- ACBRNFeNotasFiscais --     (por: DSA)
[-] Ajuste para ACBrNFe1.NotasFiscais.LoadFromFile para quando o XML lido com
    assinatura, seja corretamente atribuido a propriedade "XMLAssinado" caso o
    parâmetro AGerarNFe = True

15/09/2015
[*] (pcnNFe, pcnNFeR e pcnNFeW)
    Alterado o tipo de Integer para String do campo: nItemPed.
    Apesar de ser um campo numérico ele tem tamanho fixo = 6 e pode iniciar com
    zero.
[*] (pcnNFe, pcnNFeR e pcnNFeW)
    Alterado o tipo de Integer para String do campo: CEST.
    Apesar de ser um campo numérico ele tem tamanho fixo = 7 e pode iniciar com
    zero.
    por: Italo Jurisato Junior

14/09/2015
[*] acerto para que o DANFeNFCe não precise de scripts para rodar, 
    assim vai funcionar nas versões Fast Embarcadero e Normal
    por: regys.silveira

11/09/2015
[-] Alterado o tipo da TAG <CEST> estava como String sendo que o correto é Integer. 
    Por: Italo Jurisato Junior
[*] (pcnNFeR)
    Incluido a leitura das novas TAGs e grupo conforme a NT2015/003 que trata sobre
    a cobrança do ICMS na Operação Interestadual.
[*] (pcnNFeW)
    Incluido a escrita das novas TAGs e grupo conforme a NT2015/003 que trata sobre
    a cobrança do ICMS na Operação Interestadual.
    Por: Italo Jurisato Junior

10/09/2015
[*] Acerto nos endereços de webservices da NF-e PR e SP
    http://www.projetoacbr.com.br/forum/topic/24250-correção-no-arquivo-da-nfe-nfeservicosini/#comment-156552

09/09/2015
[*] Incluido a propriedade XMLprotNFe para conter o grupo <protNFe> ao ler o XML 
    de retorno do Consultar (pcnRetConsSitNFe).
    Incluido as propriedades XML_NFe e XML_prot para montagem do XML assinado e 
    protocolado (pcnProcNFe).
    Incluido a propriedade XMLprotNFe para conter o grupo <protNFe> ao ler o XML
    de retorno do RetRecepcao (pcnConsReciNFe).
    Alterado o TNFeConsulta.TratarResposta e TNFeRetRecepcao.TratarRespostaFinal
    visando usar as propriedades acimas para a montagem do XML assinado e 
    protocolado.
    Por: Italo Jurisato Junior

08/09/2015
-- ACBrNFeDANFeRL --
[*] Ajuste para considerar valor da propriedade "MostrarStatus"  (por: DSA)

-- ACBrNFeWebServices --
[-] Acerto para configuração correta do endereço do webservice quando utilizado o
    método de consulta, o webservice deve ser o mesmo do método.
    http://www.projetoacbr.com.br/forum/topic/9564-consulta-nfe-e-cte-outra-uf/#comment-156061
    por: regys.silveira

[*] Incluido o valor LayNFeCCe na function que converte Layout em Schema.
    Em ACBrNFeServicos.INI todos os campos: RecepcaoEvento_2.00 e RecepcaoEvento_3.10
    foram renomeados para: RecepcaoEvento_1.00
    por: Italo Jurisato Junior

04/09/2015
[-] Acerto na impressão do DANFE e eventos da NFC-e, gerava um erro de violação 
    de acesso pois alguns componentes não existem na impressão de eventos.
    por: regys.silveira

01/09/2015
[*] Alterado a URL do QR-Code da UF = AC.
    por: Italo Jurisato Junior
[*] Removido do ACBrNFeServicos.ini os campos NfeConsultaCadastro_3.10 da UF = BA.
    por: Italo Jurisato Junior

27/08/2015
-- pcnEventoNFe -- (por: regys silveira)
[-] remoção de acentuação na descrição do evento, isto estava causando erros 
    no XML de manifestação
    http://www.projetoacbr.com.br/forum/topic/23921-erro-na-manifestação-de-operação-não-realizada

24/08/2015
-- ACBRNFeNotasFiscais -- (por: regys silveira)
[-] Acerto no LoadFromString, estava cortando o XML ao ler a string para o 
    componente.

22/08/2015
-- ACBrNFeDANFCeFortesFr --    (por: DSA)
[-] Ajuste para que a propriedade "FonteTributos" seja exibida na linha de
    demonstração dos Impostos
    http://www.projetoacbr.com.br/forum/index.php?showtopic=23688

21/08/2015
-- ACBrNFeDANFCeFortesFr --    (por: DSA)
[-] Ajuste para que a propriedade "Sistema" seja exibida na última Linha
[-] Correção de erro em caractere acentuado
    http://www.projetoacbr.com.br/forum/index.php?showtopic=23714

19/08/2015
[*] Adicionado a descrição do tipo de evento Registro de Passagem NF-e em 
    getDescEvento e DescricaoTipoEvento (pcnEventoNFe.pas).
    por: Italo Jurisato Junior

18/08/2015
[*] O ValidarChave não necessita mais do prefixo da chave e internamente remove
    todos os caracteres que não sejam digitos, desta forma na chamada da função
    foi removido o prefixo.
    por: Italo Jurisato Junior
[*] Troca do StringReplace/Copy por OnlyNumber para obter somentes os digitos
    da propriedade ID.
    por: Italo Jurisato Junior

17/08/2015
[*] Correções no DANFE em Quick Report, estava ignorando os 3 primeiros digitos
    da chave.
    Por: Italo Jurisato Junior

14/08/2015
-- ACBrNFeDANFeRLRetrato --    (por: hleorj)
[-]  Mudança da posição da checagem da propriedade FNFeCancelada
[*]  Adicionado o Status 135 para o evento de cancelada;
     http://www.projetoacbr.com.br/forum/index.php?showtopic=23505

13/08/2015
-- ACBrNFeConfiguracoes --
[-] Correção para gravação Configuracoes.Geral.VersaoDF no LFM/DFM  (por: DSA)

-- ACBrNFeWebServices --
[*] A versão do ConsNFeDest e DonwloadNFe tem que ser 1.01 e 1.00 respectivamente
    caso contrario ocorrera erro de versão do arquivo XML não suportado (cabeçalho)
    Por: Italo Jurisato Junior

12/08/2015
[*] Uso da function TpEventoToDescStr em GetPathEvento;
    Por: Italo Jurisato Junior

10/08/2015
-- ACBrNFe --
[*] Removido as propriedades PathCCe e PathCan e alterado o nome da propriedade
    SalvarCCeCanEvento para SalvarEvento.
    por: Italo Jurisato Junior

-- ACBrNFeDANFeRLRetrato --    (por: hleorj)
[+]  Implementado o Grupo de Encerrantes
[-]  Correção de exibição de VALORIPI

-- ACBrNFeDANFeRLPaisagem --    (por: hleorj)
[*]  Refactoring da Danfe Paisagem.
[+]  Ajuste para aceitar denegada
[+]  Implantacao de Encerrante no grupo combustivel;
     http://www.projetoacbr.com.br/forum/index.php?showtopic=23505

09/08/2015
-- ACBrNFeDANFeRLRetrato --    (por: hleorj)
[*]  Diversos ajustes no código fonte. (refactoring)
[+]  Implantação de Encerrante no grupo combustível.

-- pcnConversaoNFe --   (por: hleorj)
[+]  function VeiculosRestricaoStr( const iRestricao :Integer ): String;
[+]  function VeiculosCorDENATRANStr( const sCorDENATRAN : String ): String;
[+]  function VeiculosCondicaoStr( const condVeic: TpcnCondicaoVeiculo ): String;
[+]  function VeiculosVinStr( const sVin: String ): String;
[+]  function VeiculosEspecieStr( const iEspecie : Integer ): String;
[+]  function VeiculosTipoStr( const iTipoVeic : Integer ): String;
[+]  function VeiculosCombustivelStr( const sTpComb : String ): String;
[+]  function VeiculosTipoOperStr( const TtpOP : TpcnTipoOperacao ): String;
[+]  function ArmaTipoStr( const TtpArma : TpcnTipoArma ): String;
     http://www.projetoacbr.com.br/forum/index.php?showtopic=23439


06/08/2015
-- ACBrNFeDANFeRLRetrato --
[*]  Ajustes na danfe para aceita Nfe denegadas corretamente (  205 , 301 e 302 )
[*]  Ajustes no código . : Remoção de variáveis e if's,
[*]  Implementação de algumas rotina em case após ajustes no código.
     http://www.projetoacbr.com.br/forum/index.php?showtopic=23439
     (por: hleorj)

[*]  Revisão de Strings com acentos convertendo-as com ACBrStr()
[*]  Remoção de comentários desnecessários, indentação
     (por: DSA)


05/08/2015
[*] Ao Ler as URLs não estava levando em consideração a SVC.
    por: Italo Jurisato Junior

03/08/2015
[*] Implementado as alterações e adição das novas TAGs conforme NT 2015/002.
    Algumas linhas de código estão comentadas para não gerar rejeição.
    Essas linhas devem ser descomentas somente em Outubro para testes e 
    Novembro para o envio em ambiente de produção. 
    por: Italo Jurisato Junior

-- ACBrNFeDANFeRLRetrato, ACBrNFeDANFeRLPaisagem --    (por: DSA)
[-] Correção para correta exibição de caracteres acentuados


01/08/2015
-- ACBrNFeDANFeESCPOS --    (por: DSA)
[*] Ajuste para correta exibição do Cabeçalho de Itens em Impressoras
    com menos de 48 colunas
    http://www.projetoacbr.com.br/forum/index.php?showtopic=23262

31/07/2015
[*] Adicionado cabeçalho XML quando não houver ao XML baixado pelo webservice
    de DownloadNFe
    por: Italo Jurisato Junior

29/07/2015
[*] Adicionado cabeçalho XML quando não houver ao XML baixado pelo webservice
    de distribuição de DFe
    por: Regys Silveira

28/07/2015
[*] Alterado a forma de converter uma string em data/hora na unit pcnRetDownloadNFe.
    por: Italo Jurisato Junior

Data: 27/07/2015
-- ACBrNFeNotasFiscais --  (por: DSA)
[-] Correção para commit efetuado 26/07. XML gravado em:
    TNFeRecepcao.TratarResposta, TNFeRetRecepcao.TratarRespostaFinal e
    TNFeConsulta.TratarResposta, não continha as informações de "procNFe"

-- ACBrNFeDANFeESCPOS --  (por: DSA)
[*] Modificado para usar as novas Tags de configuração QRCode procurando manter
    os valores definidos pelo Usuário em TACBrPosPrinter

26/07/2015   (por: DSA)
-- ACBrNFe --
[*] Ajustes para evitar nova geração do XML em GravarXML e GravarTXT,
    IMPORTANTE: Após gerado o XML, o mesmo ficará armazenado em "XMLOriginal"
	Se modificar alguma propriedade do Componente, será necessário chamar novamente
	"GerarXML" para atualizar "XMLOriginal"
[*] Melhora na performance de "ValidarRegrasdeNegocios", adicionado Logs para
    DEBUG
[*] Adicionado parâmetro Data em: GetPathEvento

14/07/2015
[*] Alterado a forma de gerar o Envelope Soap do DistribuicaoDFe e acrescentado
    o parametro Data ao gerar o PathDownload, permitindo desta forma salvar o 
    XML da NF-e retornado pelo metodo Download ou DistrubuicaoDFe na pasta 
    conforme a data de emissão ou data atual.
    por: Italo Jurisato Junior

02/07/2015
[-] Acerto no método loadfromstring, não estava retornando o result corretamente

17/06/2015
[-] acerto de geração da tag conforme previsto na nt, mais informações no post
    http://www.projetoacbr.com.br/forum/index.php?/topic/17819-nfe-310-icms-cst-51-redução-base/page-3

27/05/2015
[+] Adicionado recurso para salvar XML baixados por DistribuicaoDFe em pastas
    separadas por Nome do Emitente.
    por Isaque Pinheiro

27/05/2015
[-] Ao gerar o TXT de uma NF-e estava sendo setado a versão, e da forma que esta
    sendo feito sempre iria gerar o TXT segundo a versão 2.00, comentei a linha
    e aparentemente o problema resolveu.
    por: Italo Jurisato Junior

20/05/2015
[*] Acrescentado uma condição para determinar se será salvo em disco ou não os
    XML retornados pelo DistribuicaoDFe.
    por: Italo Jurisato Junior e Dalpiaze

10/05/2015
[-] Mais algumas alterações de definição de Serviço e SoapAction.
    por: Italo Jurisato Junior e Gledson Silva Santos

08/05/2015
[-] Alterado a definição do Serviço e SoapAction da Inutilização.
    por: Gledson Silva Santos
[-] Ao gerar o PDF da Inutilizacao não estava gerando o nome do PDF corretamente.
    por: Jose Roberto

01/05/2015
[*] Atualização das URLs de produção e homologação da NF-e e NFC-e publicadas 
    pela SEFAZ-RS.
    por: Italo Jurisato Junior

30/04/2015
[+] Implementado a propriedade PathDownload que pode ser utilizada para determinar
    o Path onde é gravado os XML de NF-e retornados pelos métodos Download e DistribuicaoDFe.
    por: Italo Jurisato Junior

09/03/2015
[*] Removido o PathMDe, pois nunca foi utilizado.
    Por: Italo Jurisato Junior
		
04/03/2015
[*] Inclusão das URLs do QR-Code para DF.
    Por: Gilson_ST
		
23/02/2015
[*] Inclusão das novas URLs para atender o novo serviço de Administração do 
    Código de Segurança do Contribuinte - CSC (Somente SEFAZ-AM).
    por: Italo Jurisato Junior

19/02/2015
[*] Inclusão de novos tipos de eventos (NFe/CTe/MDFe).
    por: Italo Jurisato Junior

18/02/2015
[-] correção pois sempre parecia uma nota
	http://www.projetoacbr.com.br/forum/index.php?/topic/19867-salvando-em-txt-apenas-%C3%BAltima-nota-da-lista/
	
10/02/2015
[*] Atribuição do conteudo de xMotivo a xMsg.
    por: Vanessa Mocellin 
[*] Corrigido nome do XML, estava salvando -NFe em vez de -nfe.
    por: Italo Jurisato Junior

09/02/2015
[*] Incluida as URLs da NFC-e para BA e SP.
    por: Italo Jurisato Junior

05/02/2015
[*] Incluida as URLs de QR-Code da NFC-e para PI.
    por: Ricardo

30/01/2015
[+] Implementado a descompactação de retorno Zipado ao acessar o Web Services:
    NFeDistribuicaoDFe
    Por: Italo Jurisato Junior

27/10/2015
[*] Alteracao para validar campo por causa do formatos diferentes entre 2.00 e 3.10
		http://www.projetoacbr.com.br/forum/index.php?/topic/19471-ajuste-valida%C3%A7%C3%A3o-pagamento/
		por : Luis Fernando

26/01/2014
[*] Acertos na impressão do DANFC-e para EscPos
    http://www.projetoacbr.com.br/forum/index.php?/topic/16371-componente-acbrnfedanfeescpos/#entry125002
    Revisão feita por: Régys Silveira

26/01/2015
[*] DANFe em Fortes Report para armamentos!
    por: ncc.star

23/01/2015
[*] Incluida as URLs de consulta da NFC-e para PB e RR.
    por: Roberto Godinho
		
14/01/2015
[*] correção para não popular campos que não existem em nf-e inferior a 3.10
		http://www.projetoacbr.com.br/forum/index.php?/topic/19454-erro-em-nota-de-importa%C3%A7%C3%A3o-campo-vafrmm/
		por: Juliomar Marchetti
		
20/01/2015
[-] Correção de bug na impressão de evento com mais de 10 linhas.
    por: regys.silveira

08/01/2015
[+] Adicionado o metodo de abertura da gaveta para impressoras bematech, epson e daruma
    por: Regys Silveira

05/01/2015
[*] Correção na URL de produção do WebServices: NFeDistribuicaoDFe
    por: LVR

02/01/2015
[*] Correção na virtual
	  por: Juliomar Marchetti
		
22/12/2014
[*] Removido da URL do PR o caracter "?" pois este já é incluido através do passo 6
    ao montar a URL do QR-code.
    por: Italo Jurisato Junior
[*] Alteração na montagem da URL do QR-Code, para o Estado do Paraná tanto a 
    data e hora de emissão e Digest Value ao serem convertidos para Hex devemos
    converter as letras para minusculo.
    por: Anderson.D
[*] Para o Estado do Pará o componente utilizará as URLs da SV-AN para a NF-e
    e as URLs da SV-RS para a NFC-e.
    por: Italo Jurisato Junior

18/12/2014
[*] Adicionar informação do xCpl ao Danfe em fast
    http://www.projetoacbr.com.br/forum/index.php?/topic/19191-inserir-campo-na-impress%C3%A3o-danfe-fastreports/
		por : Juliomar Marchetti 
		
18/12/2014
[*] Incluido a linha para alimentar a propriedade XML que conterá o resultado
    do processamento do evento.
    por: Italo Jurisato Junior

16/12/2014
[*] Para o Estado de Piaui o componente utilizará as URLs da SV-AN para a NF-e
    e as URLs da SV-RS para a NFC-e.
    por: Italo Jurisato Junior

15/12/2014
[*] Estava faltando o "Result" para pegar o retorno da function EnviarCartaCorrecao.
    por: Italo Jurisato Junior

12/12/2014
[*] Refactoring em várias Units.
    por: Italo Jurisato Junior

03/12/2014
[*] - Refatoração de código para remover funções duplicadas e aplicar padrões
	por : Juliomar Marchetti
	
02/12/2014
[*] - Alterado de posição a rotina que salva o XML da NF-e caso a propriedade
      Configuracoes.Arquivos.Salvar seja True.
      por: Italo Jurisato Junior

01/12/2014
[*] - acerto para formatar as decimais da quantidade somente quando for quantidade 
      com decimais como no ECF.
      por: regys silveira

28/11/2014
[*] - Adicionada a implementação das tags de formatação no ACBrNFeDANFeESCPOS
      ele vai utilizar as mesmas tags que são utilizadas hoje no ACBrECF
      o exemplo de utilização já possui botão e texto para teste
    - Adiconados comandos de impressão de codigos de barra e logomarca na Daruma
      por: regys silveira

27/11/2014
[*] Adição no DataModule para FastReport campos usados para medicamentos que devem ser impressos no danfe
	http://www.projetoacbr.com.br/forum/index.php?/topic/18720-declarar-vbcst-vst-e-xlote-no-report-designer/#entry118653
	por: Juliomar Marchetti

25/11/2014
[*] -- ACBrNFeDANFeESCPOS -- por: Regys Silveira
       - Identação da unit para o padrão correto.
       - Acertos gerais no layout e textos para adequação a documentação de impressão do DANFC-e
       - adicionada opção para impressão de via consumidor ou estabelecimento
       - opção de impressão resumida ou não revisada
       - adicionada opção para imprimir completo em 2 linhas ou somente 1 linha
       - adicionada opção para impressão ou não de desconto/acrescimo por linha
       - Acerto para que o ; nas observações quebre a linha corretamente
       - impressão de relatórios normais (texto livre)
       - impressão de eventos

26/11/2014
[*] Utilizacao da propriedade ImprimirTotalLiquido nos DANFEs (Quick Report).
    Por: fpasqueto
[+] Implementado o DANFE NFC-e (Quick Report) tamanho A4.
    Criado o valor tiNFCeA4 para que o DANFE A4 seja impresso em vez de bobina.
    Por: Italo Jurisato Junior
[*] Na impressão do Evento (Quick Report) será checado o modelo, caso seja 55
    será impresso NF-e caso contrario NFC-e.
    Por: Italo Jurisato Junior
[*] Na function TratarRespostaFinal, dentro do for J o if que compara o conteudo
    da propriedade DigestValue com digVal estava utilizando indice [i] em vez de [J]
    ao ler o conteudo de DigestValue.
    Foi feita a correção e mais algumas melhorias.
    Por: Italo Jurisato Junior

25/11/2014
[*] A bando com o valor aproximado dos tributos só será gerada no DANFE NFC-e 
    (Quick Report) caso o valor de vTotTrib <> 0.
    Por: Italo Jurisato Junior

20/11/2014
[*] Acerto para envio off-line da NFC-e usando ACBrECFVirtualNFCe
    http://www.projetoacbr.com.br/forum/index.php?/topic/18486-d%C3%BAvidas-acbrecfvirtualnfce/

14/11/2014
[+] Adicionas URLs de consulta da NFC-e pela chave e QR-Code para o estado do paraná
    http://www.projetoacbr.com.br/forum/index.php?/topic/18569-nfc-e-erro-url-n%C3%A3o-dispon%C3%ADvel-para-o-estado-solicitado/#entry117722
    por: Italo JurisatoJunior
[+] Adicionas URLs da NFC-e para o estado do paraná
    http://www.projetoacbr.com.br/forum/index.php?/topic/18569-nfc-e-erro-url-n%C3%A3o-dispon%C3%ADvel-para-o-estado-solicitado/#entry117722
    por: regys.silveira

14/11/2014
[*] Incluido as URLs de Consulta as NF-e Destinadas e Download de NF-e para a 
    SEFAZ-RS como consta na Relação de Serviços Web do Portal Nacional da NF-e.
    por: Italo Jurisato Junior

11/11/2014
[*] Alterações realizadas conforme NT ACBr 2014/001 nas Units: ACBrNFeDANFERave e
    ACBrNFeDANFERaveCB
    por: Italo Jurisato Junior

10/11/2014
[-] Correções baseado nos relatos de Mauricio Guedes, nomes dos arquivos após ler
    o XML usando o LoadFromStream.
    por: Italo Jurisato Junior

07/11/2014
[*] Alterações realizadas conforme NT ACBr 2014/001
    por: Italo Jurisato Junior

31/10/2014
[*] Alterações realizadas conforme NT ACBr 2014/001
    por: Italo Jurisato Junior

29/10/2014
[*] Incluido nas classes que contem as estruturas dos XML de retornos a propriedade
    versao, para que esta receba o conteudo do atributo versao.
    por: Italo Jurisato Junior

15/10/2014
[*] Melhorias no DANFE - NFC-e (Quick Report) realizadas por Daniel Caus

13/10/2014
[-] Na unit ACBrNFeDANFeQR a propriedade FViaConsumidor estava com uma letra
    a mais (FAViaConsumidor - letra A).
    por: Italo Jurisato Junior

10/10/2014
[*] Incluido a propriedade boolean: ViaConsumidor para alternar as Mensagens:
    Via Consumidor / Via Estabelecimento quando se tratar de emissão do DANFE 
    em contingência.
    por: Italo Jurisato Junior - Implementação feita por: Edilson

06/10/2014
[*] Faltou um begin em um procedimento!
	por: Juliomar Marchetti
	
06/10/2014
----------
[-] Colocado uma condição checando se a UF=29 e versão 3.10, caso afirmativo
    o nome do metodo é NfeInutilizacao em vez de NfeInutilizacao2
    Motivo da alteração: Rejeicao: Cabecalho - Versao do arquivo XML nao suportada
    Alterado a URL de Inutilização para a versão 3.10 da Bahia.    
    por: Italo Jurisato Junior

03/10/2014
----------
[*] Alterado a estrutura do envelope do metodo NFeDistribuicaoDFe
    por: Italo Jurisato Junior

02/10/2014
----------
[+] Incluido a URL de homologação e produção (não liberado ainda) para consumir o Web Service
    NFeDistribuicaoDFe
    por: Italo Jurisato Junior

14/11/2013
----------
[-] Acerto na tag nItemPed, ela é um campo numérico e estava gerando zeros não significativos.
    por: regys.silveira

31/10/2013
----------
[*] Acerto para utilização dos novos links de homologação disponibilizados pelo estado do AM e válidos para uso em todo território nacional
    http://portalnfce.sefaz.am.gov.br/desenvolvedor/ambiente-de-homologacao-para-desenvolvedores/

27/05/2013 {por Fabio Gabriel e João Henrique}
----------
[+] - {ACBrNFeDANFEFR.pas} Inclusão da propriedade "ExibeCampoFatura", opção para cancelar a impressão do campo FATURA (Somente em FastReport)
	Ps: Definido por padrão para True. 
[*] - {ACBrNFeDANFEFRDM.dfm} Modificado no cdsDestinatarioIE (Inscr.Estadual) o campo de 14 para 18 caracteres	devido a utilização na formatação para 	alguns estados.
[+] - {ACBrNFeDANFEFRDM.pas} CarregaFatura foi incluso a opção da impressão do campo (ExibeCampoFatura);  
[*] - {ACBrNFeDANFEFRDM.pas} CarregaFatura, Indicação de pagamente será sempre de acordo com o a tag indPag (juaumkiko)
[-] - {ACBrNFeDANFEFRDM.pas} CarregaParametros, modificado em vários locais:
	  	TpAmb = taHomologação: (Várias opções para teste)
		TpAmb = taProdução: (Várias opções para teste)
		TpEmis = teDPEC: (Correção conforme relatado em: http://www.projetoacbr.com.br/forum/index.php?/topic/9203-normalização-danfe-em-fast-report/page-4#entry62155
      		PS: Todos os testes precisam verificar primeiro a especificação do ProtocoloNfe e opção NFeCancelada diretamente pelo componente. (juaumkiko)
[*] - {DANFeRetrato.fr3} No Canhoto foi incluso mais uma linha, para ficar padrão como a anterior (DANFE.FR3).  Isto se faz necessário, porque várias Empresas necessita de informações mas detalhadas, devido a despacho por transportadoras, entre outras, e o tamanho fica restrito.
[*] - {DANFeRetrato.fr3} Na Fatura foi redimencionado o tamanho e incluso a opção de impressão (ExibeCampoFatura), ganhando mais espaço no produtos/serviços (obedecendo o manual).
[+] - {DANFeRetrato.fr3} Incluso um ColumnFooter para ISSQN, assim podemos usar o recurso de exibição ou não, ganhando mais espaço com os produtos/serviços.
[*] - {DANFeRetrato.fr3} Redimensionamento dos Dados Adicionais (obedecendo o manual)

04/03/2013
----------
[-] Acerto no envio de e-mail normal, não estava anexando o XML
    por regys.silveira

29/01/12
--------
[-] Acertos feitos pelo usuário Luis Fernando para o DANFE quickreport.
    http://www.projetoacbr.com.br/forum/index.php?/topic/8706-altera%C3%A7%C3%B5es-no-danfe-qreport-retrato-para-nf-e/
    - Local impressão Canhoto.
    - Mensagem obrigatória quando emitido em contingencia.
    - Estouro da linha dos itens.
    - Local Endereço Entrega.
    - Mensagem livre no lugar do software que distribui.

05/12/12 
---------------
[+] Acerto na na expansão do logotipo para o DANFE.FR3
    conforme tópico: http://www.projetoacbr.com.br/forum/index.php?/topic/8668-logomarca-expandido-danfefr/

05/12/12 (Regys Silveira, Itamar Bermond) 
---------------
[+] Inclusão da impressão e geração de PDF de Eventos com FastReport.  

22/11/2012
-- ACBrDFeUtil 
[+] Unificação de funções de mesma funcionalidade das units:
    ACBrNFeUtil, ACBrNFEsUtil, ACBrCTeUtil
    (por Isaque Pinheiro)

Alterações   08/11/12 (João Henrique)
---------------
[+] Inclusão da propriedade MostrarSetup (padrão FALSE) no componente Danfe Rave Code Base.     

Alterações   31/10/12 (Regys Silveira)
---------------
[*] Ajuste para poder escolher entre enviar email com thread ou sem thread
    o padrão continua sendo utilizando a Thread.

Alterações   10/10/12 (João Henrique)
---------------
[*] Ajustes na Impressão do Danfe (Rave Arquivo e Code Base) de acordo com a 
    NT 2012.003b onde prevê que o Cancelamento pode ter cStat como 101 e 151.

Alterações   08/05/12 (beretta)
---------------
[-] Acerto para impressão da quantidade e unidade tributaveis e comercial 
    quando forem diferentes.

Alterações   08/05/12 (juaumkiko)
---------------
[-] Correção de memory leak. 
    Incluído destructor da classe TNFeCartaCorrecao.

Alterações   15/03/12 (Regys Silveira)
---------------
[-] Acerto para validar o tamanho maximo de campos decimais sem considerar a 
    virgula, conforme apontado em:
    http://djsystem.com.br/acbr/forum/viewtopic.php?f=6&t=5072

Alterações   27/01/12 (Italo Jurisato Junior)
---------------
[-] Alteração na Emissão do DANFE - Quick Report código do status para CT-e DENEGADA 
    estava 102 sendo que o correto é 110, conforme falha detectada por Moroni.

Data: 24/01/2012 
-- ACBrNFeWebServices -- 
[-] Acerto conforme post no fórum:
    http://djsystem.com.br/acbr/forum/viewtopic.php?f=6&t=3970


Alteração    06/01/2012
-----------------------
[+] Adicionado endereço do webservice da CC-e para o Ceará

Alteração    29/11/2011
-----------------------
[-] Acerto na passagem da senha para o certifico a cada sessão.
    http://djsystem.com.br/acbr/forum/viewtopic.php?f=6&t=4054

Alteração    08/09/2011
-----------------------
[-] Corrigido vazamento de memória, na emissão da CCe, o objeto "ReqResp"
    estava sendo instanciado no método "TNFeCartaCorrecao.Executar", mas 
    não estava sendo liberado.

[-] Corrigido vazamento de memória na unit "pcnCCeNFe.pas", criado o método
    "Destroy" na class TInfEvento, para liberar o objeto "TDetEvento", que
    esta sendo instanciado no método Create.
    (por Isaque Pinheiro)

Alterações   14/07/2011
---------------
[+] Incluído recurso para imprimir informações do FISCO no respectivo quadro e não no quadro informaçõs complementares (juaumkiko)
    Para usar o recurso basta descomentar as linhas: 1247 e 1248 do arquivo ACBrNFeDANFeRaveDM.pas e compilar o projeto ou monitor novamente
    Não esqueça de atualizar os arquivos .RAV
    IMPORTANTE: Esse recurso deverá ser utilizado por sua conta e risco, pois isso esta em desacordo com o que orienta o MANUAL DE INTEGRAÇÃO

Alterações   07/06/2011
---------------
[-] Ajustado vazamento de memoria no arquivo ACBrNFeWebservices (NFeRetorno.Free) - juaumkiko

Alterações   16/05/2011
---------------
[-] Correção nos arquivos ACBrNFeUtil, libxml2 e libxmlsec para conseguir assinar e validar uma NFe utilizando OpenSSL.
    No Delphi XE isso não era possível. Para solucionar o problema foi alterado todos os valores PChar para PAnsiChar nos
    arquivos libxml2 e libxmlsec. Isso levou a necessidade de alteração na unit ACBRNFeUtil da variavel schema_filename para AnsiString
    "juaumkiko"

Alterações   28/04/2011
---------------
[-] Correção do Layout da NFe. Retirada a propriedade RENAVAM, pois a mesma não contempla mais o Layout 2.0
[+] Impressão da descrição do tipo de combustível no Danfe em Rave Arquivo e Code Base.

Alterações   08/04/2011
---------------
[-] Correção de impressão do DANFE com RAVE CODE BASE quando estiver imprimindo em Formulario de Segurança no Ambiente de Producao.

Alterações   10/03/2011
---------------
[-] Correção de impressão do NCM no DANFE com RAVE CODE BASE quando a fonte for COURIER

Alterações   28/02/2011
---------------
[-] Retirado alguns vazamentos de memória conforme relatado em http://www.djsystem.com.br/acbr/forum/viewtopic.php?f=6&t=1165 (Cezinha Anjos)
 
Alterações   22/02/2011
---------------
[-] Inversão dos campos vBC e pRedBC quando ICMSSN900. Caso 892 do MANTIS
[-] Correção para imprimir o cabeçãlho CSOSN somente quando for SIMPLES NACIONAL. Danfe em Rave Arquivo.

Alterações   09/02/2011
---------------
[*] Adicionado endereço de produção da NFe 2.0 para os WebServices do Paraná

Alterações   08/02/2011
---------------
[-] Correção da impressão do DANFE em PDF no Danfe em Rave Arquivo. Caso 878 do Mantis
[+] Incluido opção de Salvar diretamente para arquivo TXT as NFs carregadas no componente
    Utilizem o método: ACBrNFe1.NotasFiscais.SaveToTXT({caminho e nome do arquivo TXT});
    Vejam o DEMO para exemplo.

Alterações   25/01/2011
---------------
[*] Inclusão da Propriedade TamanhoFonte_ANTT nos Danfes em RAVE. Casos 853 e 868 do Mantis
[-] Correção da cardinalidade das TAGs BALSA e VAGAO. Caso 860 do MANTIS.
[-] Correção da cardinalidade das TAGs referente a CANA. Caso 863 do MANTIS.


Alterações   07/12/2010
---------------
[-] Correção no método LoadFromFile no tratamento da TAG REFNFP. Caso 814 do Mantis
[-] Correção no tratamento da TAG L120 referente de combustiveis. Caso 817 do Mantis

Alterações   03/12/2010
---------------
[-] Correção na impressão do Danfe em Rave Arquivo quando CSOSN for Vazio.

Alterações   26/11/2010
---------------
[+] Liberação dos Webservices de Produção 2.0 do estado de Pernambuco.

Alterações   24/11/2010
---------------
[-] Correção de Loop infinito no DANFE_RAVE513.rav quando o DANFE conter mais de uma página
    e existir ISSQN.

Alterações   10/11/2010
---------------
[+] Criação de classe exception para a nota eletrônica (Régys Borges da Silveira)
    - Foi criado uma classe de exception própria EACBrNFeException para o
      componente de nota eletrônica, visando facilitar o tratamento de exceções 
      vindas da nota fiscal eletrônica.

Alterações   17/09/2010
---------------
[+] Envio de nota eletrônica por e-mail (Régys Borges da Silveira, Itamar Bermond)
    - Adicionados dois novos parâmetros, um para o nome do remetente, permitindo 
      que ao enviar o e-mail apareça o nome do remetente ao invés do e-mail e outro 
      para instruir o método a ficar esperando ou não a execução da thread de
      envio de e-mail.

Alterações   26/08/2010
---------------
[-] DANFE em FAST REPORT (Régys Borges da Silveira, Itamar Bermond)
    - Desmarcada a propriedade StoreInDFM do FastReport para não gravar
      o relatório no DFM e evitar o erro de compilação em versão menores
      do delphi, favor utilizar o arquivo externo.


Alterações   25/08/2010
---------------
[-] DANFE em FAST REPORT (Régys Borges da Silveira)
    - Configuração do preview do DANFE
    - corrigido erro ao gerar pdf para uma nota só, gerava o arquivo sem extensão


Alterações   24/08/2010
---------------
[-] DANFE em FAST REPORT (Régys Borges da Silveira)
    - Correção da exportação para PDF
    - Correção para checar se o relatório foi realmente preparado antes de continuar a imprir ou gerar o PDF
    - Correção nas diretivas de compilação para Delphi 2009 e superior
    - Correções para o Simples Nacional
    - correção para utilizar o caminho da logomarca como nos outros DANFEs
    - Correçã para informar as propriedades titulo, criador, etc do PDF corretamente
    - Correções gerais no DANFE
        . layout
        . exibição da logomarca
        . tamanho das colunas para conter valores grandes
        . marca d'agua para ambiente de homologação
        . complemento a descrição da mercadoria
        . origem no CST
        . mostrar o CST corretamente quando for Simples Nacional


Alterações   16/08/10
---------------
[+] Danfe em FastReport por (Itamar Luiz Bermond)


Alterações   23/06/10
---------------
[-] Danfe em Rave Arquivo e Code Base
    - Correção da exibição do frete "1-DEST/REM" conforme NT 2010.004


Alterações   17/02/10
---------------
[-] Correções no Preview e Fonte no DANFE em FORTES REPORTS (Peterson de Cerqueira Matos)
    

Alterações   12/02/10
---------------
[-] DANFE em FORTES REPORTS (Peterson de Cerqueira Matos)
    Correção na exibição do 'Preview' para modo 'MODAL' 
[*] DANFE em RAVE ARQUIVO
    - Modificação para imprimir no corpo da nota o texto "NFe sem Autorização de Uso da SEFAZ", 
      quando estiver em Ambiente PRODUÇÃO e não tiver Protocolo de autorizacao de uso.
      OBS: O texto não será impresso se estiver em Producao e em Contingencia FS ou FS-DA.
[-] DANFE em RAVE ARQUIVO
    - Corrigido problema de geração do PDF quando existia mais de uma nota carregada no componente.(Caso 00473 do MANTIS)
[-] Corrigida declaraçao de Units em libxml2.pas, libxmlsec.pas e libxslt.pas
    para permitir a correta compilação no FreePascal no Linux

Alterações   10/02/10
---------------
[*] DANFE em FORTES REPORTS (Peterson de Cerqueira Matos)
    - Inserção da função 'BuscaDireita', que auxiliará a correção da
      exibição dos 'DADOS ADICIONAIS' para evitar que a última palavra do
      quadro fique pela metade devido à limitação da quantidade de caracteres
    - Correção da formatação de CPF, no caso de NF-e emtida para pesso física

Alterações   09/02/10
---------------
[*] Alteração do alinhamento (para esquerda) dos campos Inscr. Estadual e CNPJ no DANFE em RAVE CB.

Alterações   08/02/10
---------------
[-] Correção da impressão no DANFE com  FORTES REPORTS, para o canhoto ser impresso apenas 
    na primeira página. (Créditos: Peterson de Cerqueira Matos)
[-] Correção da impressão no DANFE com  RAVE ARQUIVO. Quando a propriedade ExpandirLogoMarca estava 
    como true, estava imprimindo "sujeira" dos dados do emitente


Alterações   06/02/10
---------------
[*] Melhorias diversas no DANFE com  FORTES REPORTS (Créditos: Peterson de Cerqueira Matos)
    - Alteração da quantidade de casas decimais dos campos 'QUANTIDADE' e
      'VALOR UNITÁRIO' para 4 casas, conforme consta no 'MANUAL DE INTEGRAÇÃO DO CONTRIBUINTE'
    - Correção na distribuição dos caracteres entre os 'DADOS ADICIONAIS' e a 'CONTINUAÇÃO DOS DADOS ADICIONAIS'
    - Inclusão dos campos 'USUÁRIO' e 'SISTEMA' no rodapé do DANFE (só folha 1)
    - Inclusão dos campos 'SITE', 'EMAIL' e 'FAX' no quadro do emitente
    - Inclusão do 'RESUMO' da NF-e no canhoto

Alterações   28/01/10
---------------
[+] Incluido Propriedade PathSchemas (ACBrNFe.Configuracoes.Geral.PathSchemas)
    Se não informar nenhum caminho, o componente procura a pasta no diretorio do executavel (como esta atualmente)
    Se informar um caminho, o componente irá procurar os Schemas neste caminho.
    Util para quem quiser centralizar os arquivos de Schemas em um servidor por exemplo.

Alterações   22/01/10
---------------
[+] Incluido pacote de Danfe em Fortes Reports (Creditos: Peterson de Cerqueira Matos)

Alterações   22/01/10
---------------
[+] Propriedade ProdutosPorPagina nos componentes do DANFE RAVE CB (caso 458 MANTIS), agora esta funcional
    Se propriedade estiver com o valor 0 (zero), o DANFE será impresso normalmente como agora. 
    Se especificar um valor, será impresso a quantidade máxima de produtos por página.
    (Créditos: João Paulo Leão)

Alterações   19/01/10
---------------
[-] Fixado tamanho de fonte no RAVE CB RETRATO para o campo FRETE POR CONTA.

Alterações   15/01/10
---------------
[*] Criado funcao UpperCase2 (NFeUtil) para transformar em caixa alta caracteres acentuados.
    Com isso o caso 460 do mantis pode ser solucionado.

Alterações   14/01/10
---------------
[+] Incluido Propriedade ProdutosPorPagina nos componentes do DANFE. (caso 458 MANTIS)
    Se propriedade estiver com o valor 0 (zero), o DANFE será impresso normalmente como agora.
    Se especificar um valor, será impresso a quantidade máxima de produtos por página.
    NOTA 1: Essa propriedade NÃO FUNCIONARÁ com o arquivo NotaFiscalEletronica.RAV, funcionará somente com o DANFE_Rave513.rav ou
            DANFE com RAVE CB
    NOTA 2: Essa propriedade ainda nao esta funcional no DANFE com RAVE CB
    NOTA 3: NÃO ESQUEÇA DE ATUALIZAR O ARQUIVO DANFE_RAVE513.RAV NO SEU SISTEMA 

Alterações   12/01/10
---------------
[-] Corrigido impressão (DANFE RAVE CB) de SÉRIE e FOLHA quando for SCAN (caso 449 MANTIS)
[-] Corrigido impressão (DANFE RAVE CB) de dizeres ENTRADA/SAIDA de acordo com o que for a NFe. (caso 457 MANTIS)

Alterações   18/12/09
---------------
[-] Corrigido impressão de numeração de páginas no DANFE Rave CB. (créditos: João Paulo Leão)

Alterações   14/12/09
---------------
[-] Fixado tamanho da fonte Courier New no Quadro Fatura/Duplicatas para o DANFE com RAVE CB. Estava cortando a data de vencimento.

Alterações   27/11/09
---------------
[*] Adicionado parâmetro SalvaTXT na função SaveToFile, onde quando estiver True irá salvar o arquivo da NFe no padrão do emissor gratuíto de SP

Alterações   18/11/09
---------------
[*] Alterado função LoadFromFile para mostrar erros na leitura de XMLs inválidos e adicionado recurso de ler vários XMLs no mesmo arquivo
[+] Adicionado ao Demo do componente o botão "Importar XML" para servir de exemplo para quem deseja usar o componente para importar XMLs 
    de NFes recebidas de fornecedores

Alterações   12/11/09
---------------
[+] Adicionada propriedade EmissaoPathNFe onde quando estiver True e se estiver configurado para salvar as NFe na propriedade PathNFe 
    com criação de pasta mensal, a NFe será salva na pasta conforme a propriedade dEmi(Data de Emissão) e não mais pela data do PC.
    Propriedade criada para resolver o caso #410 relatado no MANTIS. 
[-] Corrigido geração do campo CIDE.qBCProd pois estava sendo gerado com o p minúsculo e estava causando erro na validação.


Alterações   11/11/09
---------------
[*] Modificada funcao ReverterFiltroTextoXML (unit pcnAuxilizr.pas) para também ler caracteres HEXADECIMAIS. (Créditos João Paulo Leão)
[*] Modificado validação do Código do País conforme relato #407 no MANTIS.


Alterações   09/11/09
---------------
[-] Corrigido impressão do DANFE RETRATO em RAVE CB quando a fonte for COURIER NEW. 
[-] Corrigido impressão das Informações Adicionais quando a mesma necessitar ser impressa em mais de uma página.
    Somente para DANFE em RAVE ARQUIVO (Danfe_Rave513.rav).


Alterações   05/11/09
---------------
[-] Corrigido tamanho do campo CHAVE DE ACESSO no DANFE com RAVE CB (retrato). 
    Estava cortando 3 digitos, agora o tamanho da fonte desse campo esta fixo
[+] Incluídas as propriedades: CasasDecimais._Mask_qCom e CasasDecimais._Mask_vUnCom
    nos componentes DANFE com RAVE CB e ARQUIVO.
    - Se especificar uma mascara nessa propriedade, será desconsiderado o tamanho de casas decimais
      estipulado da referida TAG. Se estiver em branco o componente considera a quantidade de casas
      especificadas e montará a mascara padrão para a mesma (padrão).

Alterações   04/11/09
---------------
[-] Corrigido Impressão no DANFE com RAVE ARQUIVO (DANFE_Rave513.rav).
    - Não estava imprimindo corretamente quando especificava uma MargemInferior maior que 0,8 no componente
    - Em alguns casos ficava um loop infinito no "Generating Page..." 
    Importante: Atualizem os arquivos .RAV no sistema

Alterações   03/11/09
---------------
[-] Corrigido Tamanho da Fonte no DANFE em RAVE CB e RAVE Arquivo.
    Segundo o ítem 7.7.9 (Conteúdo dos Demais Campos) no Manual no Integração 4.0, os campos devem ter valor mínimo de 10 e estava com o 
    valor padrão de 8.
    Para corrigir o problema foi incluída uma propriedade chamada TamanhoFonte_DemaisCampos com valor padrão de 10, quem quiser usar outro valor 
    basta estipular nessa propriedade.

Alterações   28/10/09
---------------
[-] Corrigido geração das informações adicionais no xml, caso seja adicionado apenas uma linha de observação.

Alterações   27/10/09
---------------
[-] Corrigido impressão do DANFE PAISAGEM em RAVE CB. 
    Quando tinha mais de um ítem, só reimprimia as informações do primeiro ítem impresso.
[-] Corrigido impressão do DANFE RETRATO em RAVE CB quando a fonte for COURIER NEW. 

Alterações   22/10/09
---------------
[+] Adicionada propriedade MostrarStatus (padrão TRUE) nos componentes DANFE (RAVE arquivo e CB)
    - Quando valor da propriedade for FALSE não será exibido a janela "Generating Page ..." do RAVE.
      Útil (por exemplo) na criação do PDF para enviar no email e quando desejar mostrar uma janela personalizada enquanto gera o DANFE.

Alterações   21/10/09
---------------
[*] Arquivo instala.bat das DLLs da versão CAPICOM alterado para copiar DLLs para o local correto nas versões 64 bits do Windows
[-] Corrigido erro na leitura da data de vencimento do certificado(Versão CAPICOM) para quando número de série não estava informado
[*] Sincronizada algumas units do PCN com as versões disponíveis no SVN do Projeto Cooperar.
[+] Função de cancelamento da NFe, quando for feita com a nota carregada no componente, os campos da tag procNFe serão atualizados no
    arquivo da NFe.
[+] DANFE em RAVE CB
    - Ao imprimir um DANFE de um XML que ainda não tem número de protocolo e o tipo de emissão é normal ou dpec, ele imprimirá uma 
      mensagem no DANFE alertando o usuário que a nota ainda não foi autorizada (créditos João Paulo S. Leão)
    - Incluída propriedade ImprimirDetalhamentoEspecifico (padrão TRUE).
      Quando for false não serão impressos informações de Detahamento específico (Veiculos, Combustiveis, Medicamentos, etc). 
      Será útil para quem quiser exibir as referidas informações de maneira personalizada.

Alterações   16/10/09
---------------
[*] DANFE em RAVE ARQUIVO
    - Modificada diretiva para compatibilidade com o Delphi 2010. (créditos Luis Henrique)

Alterações   15/10/09
---------------
[*] DANFE em RAVE ARQUIVO
    - Quando a TAG qVol tiver valor 0 (zero) a mesma não será impressa no DANFE.
[-] Arquivo DANFE_Rave513.rav para o DANFE em Rave Arquivo, não estava imprimindo mais de uma duplicata quando ia reimprimir um XML.

Alterações   14/10/09
---------------
[*] DANFE em RAVE CB (créditos João Paulo S. Leão)
    - Corrigido local de impressão das Informações do Fisco, pois a mesma tem que ser impressa no quadro Informações Complementares
    - Propriedade FormularioContinuo agora esta funcional em RAVE CB. Antes só estava funcionando em RAVE ARQUIVO.
      Se estiver TRUE não será impresso molduras e descrições de campo no canhoto e EMITENTE.  
[+] DANFE em RAVE CB (créditos João Paulo S. Leão)
    - Incluída Propriedade EspessuraBorda (padrão 2). Em algumas impressoras esta propriedade pode não surtir efeito.
    - Incluída Propriedade ExpandirLogoMarca (padrão FALSE). Se a mesma estiver TRUE o logo ocupará todo o espaço do quadro Dados do Emitente.
      Funcional para quem quiser personalizar o quadro Dados do Emitente. Para isso basta estipular a imagem personalizada no campo LOGO e
      setar essa propriedade para TRUE.
[+] DANFE em Rave Arquivo (.rav): 
    - Incluída Propriedade ExpandirLogoMarca (padrão FALSE). Se a mesma estiver TRUE o logo ocupará todo o espaço do quadro Dados do Emitente.
      Funcional para quem quiser personalizar o quadro Dados do Emitente. Para isso basta estipular a imagem personalizada no campo LOGO e
      setar essa propriedade para TRUE.

Alterações   09/10/09
---------------
[*] DANFE em RAVE CB (créditos João Paulo S. Leão)
    - Corrigido impressão de informações Complementares em mais de Uma Página (Retrato e Paisagem)
[*] DANFE em Rave Arquivo (.rav): 
    - Corrigido impressão de informações Complementares em mais de Uma Página 
      IMPORTANTE: Recurso disponível SOMENTE em no Danfe_Rave513.rav, no arquivo NotaFiscalEletronica.rav essa correção não será implementada
                  por falta de recursos do RAVE 5.0. 
                  Nesse caso Utilizem o Danfe_Rave513.rav (somente para RAVE 5.1.3 ou superior) ou 
                  utilizem o DANFE em Rave CB (somente para Rave 5.0.8 ou superior)
    - Corrigido local de impressão das Informações do Fisco, pois a mesma tem que ser impressa no quadro Informações Complementares

Alterações   06/10/09
---------------
[+] Adicionado evento  OnGerarLog, onde poderá ser usado para gravar as mensagens enviadas pelo componente(Veja no demo como utilizar para 
    adicionar as mensagens em um memo).
[+] Adicionada propriedade IntervaloTentativas para definir qual deve ser o intervalo entre as tentativas de consulta de retorno de envio 
    da NFe. Valor mínimo deve ser 1000(1 segundo)
[+] Adicionada propriedade AjustaAguardaConsultaRet onde quando for True, a propriedade AguardarConsultaRet será ajustada com o valor do
    campo tmed do retorno de consulta de status do serviço.
[-] Alterado geração do campo Dest.IE para permitir valor para quando for pessoa física. Em MG produtores rurais possuem CPF e IE
[-] Alterado geração da tag qTemp para ser gerada apenas qdo tiver algum conteúdo
[-] Corrigido criação da tag UFCons, estava como UFcons

Alterações   05/10/09 
---------------
[-] Corrigido vazamentos de memória em Thread de envio de e-mail (Daniel Simões de Almeida)
[+] Adicionada propriedades AguardarConsultaRet e Tentativas nas configurações do WebService. Estas propriedades apenas serão utilizadas
    na consulta de retorno da autorização da NFe, por padrão o números de tentativas atual do componente está como 5, então está propriedade
    será criada com este valor, mas poderá ser alterado para o valor que o desenvolvedor desejar. A propriedade AguardarConsultaRet  deve
    ser informada em MiliSegundos, onde 1000 equivale a 1 segundo. O valor informado na propriedade AguardarConsultaRet será usado para 
    aguardar antes de efetuar a primeira consulta, por padrão está com 0 que é o valor utilizado hoje no componente. Para dias em que os 
    servidores do sefaz estiverem apresentando problemas de lentidão, esta propriedae poderá ser alterada. 

Alterações   29/09/09
---------------
[-] Alterado linhas onde existia Path+'\' para PathWithDelim(Path)
[-] Corrigido retorno das funções EnviarDPEC, ConsultarDPEC e Consulta de Cadastro, para retornarem True quando o comando for executado
    com sucesso(Estava retornando sempre False)
[+] Adicionado propriedade Fonte no componente ACBrNFeDanfeRaveCB, onde pode ser usado ftTimes - para Times New Romam e ftCourier - para
    Courier New

Alterações   25/09/09
---------------
[-] Impressão dos dados (quando houver) no quadro Inf. Adicional do Fisco no RAVE CB


Alterações   24/09/09
---------------
[*] Alterado URLs do DF para usarem URLs do SVRS
[-] Corrigida funcção TACBrNFe.Consultar que estava consultando apenas primeira nota quando existia mais de uma nota carregada no componente.
[*] Alterado função Assinar para atualizar XML quando for usado o comando LoadFromFile
[-] Corrigido retorno das propriedades PathNFe, PathInu, PathCan e PathDPEC

Alterações   23/09/09
---------------
[+] Incluída propriedade ImprimirHoraSaida_Hora nos componentes DANFE.
    Se a propriedade ImprimirHoraSaida estiver true e a propriedade ImprimirHoraSaida_Hora estiver preenchida
    será impressa o valor estipulado na propriedade ImprimirHoraSaida_Hora. Caso não tenha nenhum valor especificado
    será impresso a HORA ATUAL.
[+] Incluído propriedade FormularioContinuo nos componentes DANFE.
    Se estiver TRUE não será impresso molduras e descrições de campo no canhoto e EMITENTE.
    OBS: Por enquanto essa propriedade esta funcional somente para opção do DANFE em ARQUIVO (.rav)


Alterações   18/09/09
---------------
[+] Danfe em Rave Arquivo (.rav) imprime um resumo no canhoto igual ao RAVE em DANFE CB.
    Quando a propriedade ExibirResumoCanhoto estiver TRUE será exibido esse resumo.
    Funcionalidade já existia no DANFE em RAVE CB e agora foi incluida no DANFE em RAVE ARQUIVO.
    IMPORTANTE: ATUALIZE OS ARQUIVOS .RAV NO SEU SISTEMA
[+] Incluída propriedade TamanhoCampoCódigo no Danfe em RAVE CB.
    Quando o valor dessa propriedade for ZERO será utilizado o valor padrão da mesma.
[+] Incluída propriedade ImprimirTotalLiquido no componente DANFE (Arquivo e CB)
    Se estiver TRUE será exibido V.LIQUIDO no quadro DADOS DO PRODUTO/SERVICO e o valor da mesma sera vProd-vDesc
    Padrão da Propriedade é FALSE.
[+] Incluído a impressão do campo VALOR DESCONTO/DESC % no DANFE em RAVE CB (retrato e paisagem)
    Se a propriedade ImprimirDescPorc for TRUE será impresso o desconto em percentual.
    Funcionalidade já existia no DANFE em RAVE ARQUIVO e agora foi incluida no DANFE em RAVE CB.


Alterações   17/09/09
---------------
[+] Impressão dos campos de medicamento do DANFe Rave CB
[*] Leitura da propriedade PathPDF modificada, para verificar se o diretório configurado existe e caso não exista será criado automaticamente
[+] Adicionada novas propriedades no componente ACBrNFe para salvar arquivos em pastas separadas.
    -Salvar  - Propriedade booleana para indicar se os arquivos devem ou não ser salvos em pastas específicas
    -PathNfe - Pasta para salvar os arquivos da NFE, terminados com -nfe.xml
    -PathCan - Pasta para salvar arquivos de pedido e resposta de cancelamento, terminados em -ped-can.xml e -can.xml
    -PathInu - Pasta para salvar arquivos de pedido e resposta de inutilização, terminados em -ped-inu.xml e -inu.xml
    -PathDPEC - Pasta para salvar arquivos de pedido e resposta de DPEC, terminados em -env-dpec.xml e ret-dpec.xml
    -PastaMensal - Propriedade booleana para indicar se deve ser criado um subdiretório com mes e ano dentro das pastas configuradas
		   nas propriedades Path.. citadas acima. Exemplo: PathNFe = C:\ACBr\NFe os arquivos serao salvos em C:\ACBr\NFe\200909

    -AdicionarLiteral - Propriedade booleana para indicar se deve ser adicionada a literal do arquivo na pasta. Exemplo: 
	                PathNFe = C:\ACBr\Arqs será criado a pasta C:\ACBr\Arqs\NFe
			Caso a propriedade PastaMensal esteja True e AdicionarLiteral tabém esteja True, as pastas serão criadas da
                        seguinte forma: PathNFe = C:\ACBr\Arqs será criado a pasta C:\ACBr\Arqs\200909\NFe 
[-] Correção da impressão do canhoto no DANFE RAVE CB PAISAGEM, quando o nome do emitente for muito grande.


Alterações   16/09/09
---------------
[*] Na impressão do DANFE (RAVE CB) quando a razão social for muito grande, a mesma será quebrada em duas linhas.
    Se (devido ao tamanho Razão Social) o espaço do canhoto "estourar", o mesmo será impresso em duas linhas e será desconsiderado
    a propriedade ExibirResumoCanhoto
[-] Corrigido impressão de Separador de Milhar (.) na função FormatFloat da unit ACBrNFeUtil.pas

Alterações   15/09/09
---------------
[*] Na rotina de consulta, adicionada linha para atualizar a propriedade Confirmada da NFe(cStat = 100).
[-] Na impressão do DANFE, caso não exista o protocolo não será mais impresso a data 31/12/1899
[-] Corrigido endereço da URL de recepção no ambiente de homologação do estado do CEARÁ

Alterações   14/09/09
---------------
[-] Corrigido criação do arquivo PDF na pasta correta quando estiver configurado a propriedade PathPDF. Caso a propriedade PathPDF
    não esteja preenchida, será usado o valor da variável PathSalvar e caso também não esteja preenchida, será gravado na 
    pasta do programa.
[-] Corrigido geração do campo cPais do destinatário, para sempre gerar com 4 dígitos.

Alterações   11/09/09
---------------
[-] Correção para leitura da variável XML com o protocolo de autorização, quando lida após o envio da NFe

Alterações   10/09/09
---------------
[-] Corrigido função LerCampo (unit pcnNFeRTXT), para quando ler um campo data vazio, não retornar erro.

Alterações   09/09/09
---------------
[*] Adicionado URL de Consulta ao Cadastro em ambiente de produção para MG
[-] Correção na rotina de consulta para quando não houver nota carregada no componente(Consulta efetuada apenas pela chave)
[*] Impressão dos campos InfAdic.obsCont nas Informações Adicionais do RAVE em CB

Alterações   08/09/09
---------------
[-] Alterado rotina de consulta da NFe para atualizar a tag procNfe qdo o arquivo for carregado(LoadFromFile)

Alterações   06/09/09
---------------
[-] Alterado forma de atualização da tag procNFe no arquivo XML da NFe.

Alterações   03/09/09
---------------
[*] Alterado URL de Rondônia para utilizarem os serviços da SEFAZ Virtual do Rio Grande do Sul (SVRS).  
[*] Alterado função para calcular nome do arquivo PDF. Será gerado apenas com a chave da nfe .pdf sem a literal NFe
[-] Alterado função NotasFiscais.SaveToFile para pegar apenas Path do Nome passado na função.
[-] Corrigido CSTAT do retorno do envio para atribuir CSTAT da Nota apenas qdo lote estiver processado.
[*] Alterado geração da Inutilização para CNPJ ser gerado somente com números, sem máscara.

Alterações 02/04/09 - Realizadas por Dulcemar Zilli
[*] Ajustes para o Pacote PL_005c
[+] Acrescentado Observações do Fisco
[+] Incluida Informações Reboque Transportador
[+] Incluida Informações ISSQN e Retenções Tributos e Totalizadores Gerais
[+] Adicionadas as Complementação Emitente, IEST, IM, CNAE
[-] Separados GTIN da Unidade Tributavel, Unidade Tributavel, Quantidade Tributavel e 
    Valor Unitario Tributavel de EAN, Unidade de Comercializações, Quantidade e 
    Valor Unitario pois não necessariamente as duas são iguais e  nem todos os 
    produtos tem estas informação, que é aplicado mais em casos de 
    comercialização de combustiveis. No caso da Unidade de Tributação não ser 
    informada ela usa por default a Unidade de Comercialização, neste caso a GTIN 
    fica em branco e os demais campo zerado.  
[*] Alterado relatorio da DANFE p/ impressão de ISSQN e totais, bem como IPI, 
    Observações do Fisco, etc.


Versão 0.02a   29/03/09
---------------
[+] Adicionado opção para gerar Danfe em PDF
[-] Corrigido XML de Cancelamento e Inutilização para incluir o encoding=UTF-8
[+] Adicionada função que permite que ; (ponto e vírgula) seja considerada que-
    bra de linha no campo informações complementares.

Versão 0.01a   18/02/09
---------------
[+] Início do Projeto
[+] Primeira Versao lançada baseado no componente fornecido por Wemerson Souto.




