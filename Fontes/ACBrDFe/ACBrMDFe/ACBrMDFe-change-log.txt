{******************************************************************************}
{ Projeto: Componentes ACBr                                                    }
{ Biblioteca multi plataforma de componentes Delphi para interação com equipa- }
{ mentos de Automação Comercial utilizados no Brasil                           }
{                                                                              }
{  Você pode obter a última versão desse arquivo na página do Projeto ACBr     }
{ Componentes localizado em      http://www.sourceforge.net/projects/acbr      }
{                                                                              }
{  Esta biblioteca é software livre; você pode redistribuí-la e/ou modificá-la }
{ sob os termos da Licença Pública Geral Menor do GNU conforme publicada pela  }
{ Free Software Foundation; tanto a versão 2.1 da Licença, ou (a seu critério) }
{ qualquer versão posterior.                                                   }
{                                                                              }
{  Esta biblioteca é distribuída na expectativa de que seja útil, porém, SEM   }
{ NENHUMA GARANTIA; nem mesmo a garantia implícita de COMERCIABILIDADE OU      }
{ ADEQUAÇÃO A UMA FINALIDADE ESPECÍFICA. Consulte a Licença Pública Geral Menor}
{ do GNU para mais detalhes. (Arquivo LICENÇA.TXT ou LICENSE.TXT)              }
{                                                                              }
{  Você deve ter recebido uma cópia da Licença Pública Geral Menor do GNU junto}
{ com esta biblioteca; se não, escreva para a Free Software Foundation, Inc.,  }
{ no endereço 59 Temple Street, Suite 330, Boston, MA 02111-1307 USA.          }
{ Você também pode obter uma copia da licença em:                              }
{ http://www.opensource.org/licenses/lgpl-license.php                          }
{                                                                              }
{ Daniel Simões de Almeida  -  daniel@djsystem.com.br  -  www.djsystem.com.br  }
{              Praça Anita Costa, 34 - Tatuí - SP - 18270-410                  }
{                                                                              }
{******************************************************************************}
Agradecimentos:

* Administradores:
- Daniel Simões de Almeida
- André Ferreira de Moraes

* Desenvolvedores:
-

{******************************************************************************
|* ACBrMDFe (Manifesto Eletrônico de Documentos Fiscais)
|*
|* PROPÓSITO: Registro de Alterações
******************************************************************************}

Símbolo : Significado

[+]     : Novo recurso
[*]     : Recurso modificado/melhorado
[-]     : Correção de Bug (assim esperamos)

17/02/2016
-- ACBrMDFeManifestos --
[*] Refactoring para usar a nova rotina de validação de CNPJ, do DFeSSL (por: DSA)

17/02/2016
-- ACBrMDFeManifestos --
[-] Acerto para validar corretamente a raiz do certificado quando é o certificado 
    é emitido para o CPF do responsável e não para o CNPJ da empresa.
    por: regys.silveria / Italo Jurisato Junior

17/02/2016
--ACBrMDFeDAMDFeRLEvento
[*] Modificação para exibir ou não o preview também no imprimir evento
    Por: Juliomar Marchetti

12/01/2016
-- ACBrMDFeWebServices --
[*] Correção de leak de memória causado pela criação em duplicidade o objeto
    MDFeRetorno.
    Por: Italo Jurisato Junior

05/01/2016
-- ACBrMDFeWebServices --
[*] Adicionada verificação de Chave na atribuição de TNFeConsulta.MDFeChave
    Por: Italo Jurisato Junior

04/01/2016
-- ACBRMDFeManifestos --
[-] Correção para atribuição de "ACBrMDFe.Manifestos[x].NomeArq" em
    "TManifestos.LoadFromFile". A rotina anterior atribuia o ultimo NomeArq
    a todos os Manifestos carregados na memória  
    por: Italo Jurisato Junior

-- ACBrMDFeWebServices --
[*] Ajustes em "Create" e "Clear" de todos os WebServices, para garantir que
    após o "Clear" os valores necessários, para as propriedades internas, do
    WebService esteja corretos.  
    por: Italo Jurisato Junior

-- ACBrMDFeWebServices --
[+] Adicionada sobrecarga no método "Clear" de todos os WebServices
[*] Remoção de propriedades sem uso.
[*] Ajuste de acesso (write) em propriedades que podem ser ReadOnly
    por: Italo Jurisato Junior

23/12/2015
-- ACBrMDFeManifestos --
[*] Ajuste no método "VerificarAssinatura", para informar o infElement (por: DSA)

04/12/2015
-- ACBrMDFeNotasFiscais --
[*] método "Assinar", modificado para só validar CNPJ se conseguir ler o mesmo
    com sucesso, do Certificado.
    por: Italo Jurisato Junior

-- ACBrMDFeWebServices --
[*] WebService: "TMDFeEnvEvento", modificado, para salvar o "NomeArquivo", se o
    XML for salvo após a consulta (depende da configuração).
    por: Italo Jurisato Junior

-- pmdfeEventoMDFe --
[+] Tipo: TRetInfEvento, adicionada a propriedade: "NomeArquivo: String", que
    conterá o nome do arquivo XML criado, após o retorno, e se estiver
    configurado para salvar o XML.
    por: Italo Jurisato Junior

03/12/2015
-- pmdfeMDFeR --
[*] Tentativa de conseguir ler corretamente todas as ocorrências da tag
    <qtdRat>.
    por: Italo Jurisato Junior

02/12/2015
-- ACBrMDFeWebServices --
[*] Removido na montagem de alguns XML a linha '<' + ENCODING_UTF8 + '>' para 
    o componente forçar a conversão ao salvar o XML.
    por: Italo Jurisato Junior

-- ACBrMDFeWebServices --
[*] Ao protocolar o XML após um envio ou consulta estava provocando uma nova
    leitura do XML, agora o XML assinado e protocolado é armazenado da propriedade
    XMLOriginal em vez de XML.
    por: Italo Jurisato Junior

01/12/2015
-- pmdfeConsMDFeNaoEnc --
[-] Correção no encoding na geração do envelope de: TConsMDFeNaoEnc
    http://www.projetoacbr.com.br/forum/topic/26240-consulta-mdfe-n%C3%A3o-encerrados/
    (por: DSA)

27/11/2015
-- pmdfeEventoMDFe --
[*] Adicionado o tipo de evento: teConfInternalizacao - (990910) 
    Confirmacao de Internalizacao da Mercadoria na SUFRAMA
    por: Italo Jurisato Junior

25/11/2015
-- ACBrMDFeWebServices --
[*] Comentado a linha que definia um BodyElemente diferente do padrão.
    por: Italo Jurisato Junior

11/11/2015
-- ACBrMDFeWebServices --
[*] Remoção de variáveis e códigos não utilizados.
    por: Italo Jurisato Junior

-- ACBrMDFe / ACBrMDFeWebServices --
[*] Ajsutes conforme a nova NT 2015/002 - WS Distribuicao DFe.
    por: Italo Jurisato Junior

05/11/2015
-- ACBrMDFeWebServices --
[*] Remoção de variáveis e códigos não utilizados.
    por: Italo Jurisato Junior

03/11/2015
-- ACBrMDFeWebServices --
[*] Refatoração, simplificação de código em TMDFeEnvEvento.TratarResposta
    por: Italo Jurisato Junior

30/10/2015
-- ACBrMDFeWebServices --
[-] Correção não estava salvando o retorno ao enviar um evento.
    por: Italo Jurisato Junior

30/09/2015
-- ACBrMDFeWebServices --
[-] Correção para que o tipo de ambiente fique correto na consulta.
    por: regys.silveira
[-] Acerto para utilizar o CNPJ do evento ao salvar os arquivos de envio/retorno.
    por: Italo Jurisato Junior

29/09/2015
-- ACBrMDFeDAMDFeRLRetrato --
[-] Ajuste para que mensagem de Homologação não seja exibida em Produção (por: DSA)

-- ACBrMDFeWebServices --
[-] TMDFeConsulta, Correção de Bug introduzido. Interpretação errada de
    tpEmis e tpAmb.
    por: Italo Jurisato Junior
[-] TMDFeConsulta, correção para consulta de MDFEs com UF diferente da UF do
    Emissor.  
    por: Italo Jurisato Junior
[-] Acerto para utilizar o CNPJ do evento quando for salvá-lo em disco,
    em alguns casos o usuário pode utilizar o certificado da Matriz, antes
    estava salvando utilizando o CNPJ do certificado o que mistura xmls de
    evento da matriz com a filial.
    por: Italo Jurisato Junior

-- ACBrMDFeManifestos --
[*] Corrigido o método Validar, para extrair apenas a Tag <MDFe> do XML informado
    por: Italo Jurisato Junior

22/09/2015
[*] (ACBrMDFeWebServices)
    Incluido a linha que defini a versão do serviço em ConsultaMDFeNaoEnc.
    Incluido a função para converter o código da UF em Sigla no GerarMsgLog também
    em ConsultaMDFeNaoEnc.
    Por: Matheus / Italo Jurisato Junior

17/09/2015
[*] (ACBrMDFeManifestos/ACBrMDFeWebServices)
    Ajustes para que os arquivos de envio/retorno fiquem condicionados a propriedade
    Configuracoes.Geral.Salvar e os arquivos fiscais a propriedade
    Configuracoes.Arquivos.Salvar
    Por: Italo Jurisato Junior

16/09/2015
[-] (ACBrMDFeManifestos)
    Ajuste para ACBrMDFe1.Manifestos.LoadFromFile para quando o XML lido com
    assinatura, seja corretamente atribuido a propriedade "XMLAssinado" caso o
    parâmetro AGerarMDFe = True
    Por: Italo Jurisato Junior

11/09/2015
[*] (ACBrMDFeWebServices) 
    Incluida a linha para configurar a propriedade: RetirarAcentos ao gerar o XML
    da Consulta a MDF-e não encerrados.
    Por: Italo Jurisato Junior

10/09/2015
[*] (Units: Diversas) 
    Remoção de código comentados e de alguns comentários desnecessários.
    Por: Italo Jurisato Junior

09/09/2015
[+] (pmdfeRetConsSitMDFe) 
    Incluido a propriedade XMLprotMDFe para conter o grupo <protMDFe> ao ler o XML 
    de retorno do Consultar.
[+] (pmdfeProcMDFe)
    Incluido as propriedades XML_MDFe e XML_prot para montagem do XML assinado e 
    protocolado.
[+] (pmdfeConsReciMDFe)
    Incluido a propriedade XMLprotMDFe para conter o grupo <protMDFe> ao ler o XML
    de retorno do RetRecepcao.
    Por: Italo Jurisato Junior

01/09/2015
[*] Corrigido a extração do XML de retorno, não estava pegando o grupo protMDFe.
    Por: Italo Jurisato Junior

29/08/2015
[*] Alterado a forma de acrescentar o protocolo de autorização ao XML assinado.
    O XML assinado e protocolado fica disponivel nas propriedades XML e XMLAssinado
    Por: Italo Jurisato Junior

25/08/2015
[-] Acerto no LoadFromString, estava cortando o XML ao ler a string para o 
    componente.
    por: Italo Jurisato Junior

18/08/2015
[*] Correção nos nomes dos serviços.
    por: Italo Jurisato Junior
[*] O ValidarChave não necessita mais do prefixo da chave e internamente remove
    todos os caracteres que não sejam digitos, desta forma na chamada da função
    foi removido o prefixo.
    por: Italo Jurisato Junior
[*] Troca do StringReplace/Copy por OnlyNumber para obter somentes os digitos
    da propriedade ID.
    por: Italo Jurisato Junior

17/08/2015
[*] Melhorias no DAMDFE em Fast Report.
    por: NCC

12/08/2015
[*] Removido a propriedade SalvarEvento, pois a propriedade Salvar é que determina
    se o arquivo *-procEventoMDFe.xml será salvo ou não em disco.
    Por: Italo Jurisato Junior
[*] Uso da function TpEventoToDescStr em GetPathEvento.
    Por: Italo Jurisato Junior

11/08/2015
[*] Alteração na montagem do XML assinado e protocolado.
    por: Italo Jurisato Junior

07/08/2015
[*] Criado duas propriedades em pmdfeProcMDFe visando uma outra forma de montar
    o XML assinado e protocolado, criado também uma propriedade em 
    pmdfeRetConsReciMDFe para armazenar o protocolo de autorizacao ealterado o 
    TratarRespostaFinal do TMDFeRetRecpcao para utilizar as alterações acima.
    por: Italo Jurisato Junior

31/07/2015
[*] Adicionado cabeçalho XML quando não houver ao XML baixado pelo webservice
    de distribuição de DFe
    por: Italo Jurisato Junior

30/07/2015
[*] Correção para acrescentar no XML o protocolo de autorização.
    por: Italo Jurisato Junior

28/07/2015
[*] Melhorias na leitura do retorno do envio de eventos.
    por: Italo Jurisato Junior

27/07/2015
[*] Compatibilizando com o ACBrNFe.
    por: Italo Jurisato Junior
[-] Correções no envio de eventos.
    por: Italo Jurisato Junior

15/07/2015
[-] Esta faltando a definição das TAGs de do cabeçalho e de dados.
    por: Italo Jurisato Junior

14/05/2015
[*] Ajustes no MDFe para Fortes Report, compilando normalmente agora.
    por: Regys Silveira

25/05/2015
[*] Melhorias no DAMDFE em Fortes Report.
    por: André J. da Silva

01/05/2015
[*] Atualização das URLs de produção e homologação do MDF-e publicadas 
    pela SEFAZ-RS.
    por: Italo Jurisato Junior

29/04/2015
[-] Correção no calculo do numero de paginas.
    por: Italo Jurisato Junior

06/03/2015
[*] inclusão do CoInitialize no ValidaModalMSXML.
    por: Rafael Dal Bosco
[*] Alteração visando corrigir a leitura da UF do veículo Tração e Reboque.
    por: Italo Jurisato Junior

24/02/2015
[*] Otimização de código.
    por: Italo Jurisato Junior

21/02/2015
[-] Incluido o Status 132 ao realizar uma consulta de um MDF-e.
    por: Italo Jurisato Junior

20/02/2015
[-] Não estava lendo o grupo proprietário e condutor.
    por: Paulo Henrique

19/02/2015
[*] Inclusão de novos tipos de eventos (NFe/CTe/MDFe).
    por: Italo Jurisato Junior

10/02/2015
[*] Corrigido nome do XML, estava salvando -MDFe em vez de -mdfe.
    por: Italo Jurisato Junior

04/02/2015
[*] Compatibilizado a checagem da propriedade ID ao gerar o XML.
    por: Italo Jurisato Junior

02/02/2015
[-] Alteração visando corrigir a leitura da UF do veículo.
    por: Italo Jurisato Junior

31/01/2015
[*] Alteração visando corrigir a leitura da UF do veículo.
    por: Italo Jurisato Junior

23/01/2015
[*] Incluido uma linha que seta a opção de retirar acentos ou não do XML antes
    de gerar o XML de consulta a MDF-e não encerrados.
    por: Paulo Henrique

19/01/2015
[*] Correção no nome da TAG de retorno da consulta de MDF-e não Encerrados.
    por: jhmontoia

14/01/2015
[*] Alterado o DAMDFE conforme Nota Técnica 2015/001.
    por: Italo Jurisato Junior
[*] Alterado o conteudo da tag xServ, a palavra NAO estava com o acento errado.
    por: Italo Jurisato Junior

06/01/2015
[*] Alterado o conteudo da tag xServ, a palavra NAO estava sem acento.
    por: Italo Jurisato Junior
[*] Alterado o nome da TAG de Retorno da consulta a MDF-e não encerrados.
    por: Italo Jurisato Junior

05/01/2015
[+] Incluido a URL do Web Service MDFeConsNaoEnc tanto para homologação quanto
    para produção.
    por: Italo Jurisato Junior

18/12/2014
[*] Incluido a linha para alimentar a propriedade XML que conterá o resultado
    do processamento do evento.
    por: Italo Jurisato Junior

17/12/2014
[-] Alteração visando obter o retorno de status e motivo após o envio de um
    Evento.
    por: Italo Jurisato Junior

16/12/2014
[-] Alterado a propriedade pela variável de Retorno de Eventos.
    por: Italo Jurisato Junior
[-] Alterado a rotina que gera o lote de eventos.
    por: Italo Jurisato Junior

11/12/2014
[*] Refactoring em várias Units.
    por: Italo Jurisato Junior

18/11/2014
[*] Ajuste no campo observação para que ocorra quebra de linha ao encontrar ";"
    Alteração realizada no DAMDFE - Fast Report
    por: Paulo Hostert

10/11/2014
[-] Correções baseado nos relatos de Mauricio Guedes, nomes dos arquivos após ler
    o XML usando o LoadFromStream.
    por: Italo Jurisato Junior

07/11/2014
[*] Alterações realizadas conforme NT ACBr 2014/001
    por: Italo Jurisato Junior

06/11/2014
[-] Caso o proprietario tenha IE será gerado a TAG UF.
    por: Paulo Henrique

05/11/2014
[*] Mais algumas alterações realizadas conforme NT ACBr 2014/001
    por: Italo Jurisato Junior

31/10/2014
[*] Alterações realizadas conforme NT ACBr 2014/001
    por: Italo Jurisato Junior

29/10/2014
[*] Incluido nas classes que contem as estruturas dos XML de retornos a propriedade
    versao, para que esta receba o conteudo do atributo versao.
    por: Italo Jurisato Junior

Data 20/10/2014
[*] Alterado para imprimir o protocolo de autorização de um MDF-e emitido 
    inicialmente em Contingência.
    Por: Italo Jurisato Junior

Data 01/04/2013
[*] Alterado para instalar em Lazarus, também adicionado o pacote ACBr_MDFe.lpk, criação 
    do arquivo para a imagem do componente no lazarus. 
    (Juliomar Marchetti)

